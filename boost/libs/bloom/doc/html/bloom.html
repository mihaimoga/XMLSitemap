<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Boost.Bloom</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Boost.Bloom</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">Introduction</a>
<ul class="sectlevel2">
<li><a href="#intro_getting_started">Getting Started</a></li>
</ul>
</li>
<li><a href="#primer">Bloom Filter Primer</a>
<ul class="sectlevel2">
<li><a href="#primer_implementation">Implementation</a></li>
<li><a href="#primer_variations_on_the_classical_filter">Variations on the Classical Filter</a>
<ul class="sectlevel3">
<li><a href="#primer_block_filters">Block Filters</a></li>
<li><a href="#primer_multiblock_filters">Multiblock Filters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tutorial">Tutorial</a>
<ul class="sectlevel2">
<li><a href="#tutorial_filter_definition">Filter Definition</a>
<ul class="sectlevel3">
<li><a href="#tutorial_subfilter"><code>Subfilter</code></a></li>
<li><a href="#tutorial_stride"><code>Stride</code></a></li>
<li><a href="#tutorial_hash"><code>Hash</code></a></li>
</ul>
</li>
<li><a href="#tutorial_capacity">Capacity</a></li>
<li><a href="#tutorial_insertion_and_lookup">Insertion and Lookup</a></li>
<li><a href="#tutorial_filter_combination">Filter Combination</a></li>
<li><a href="#tutorial_direct_access_to_the_array">Direct Access to the Array</a></li>
<li><a href="#tutorial_debugging">Debugging</a>
<ul class="sectlevel3">
<li><a href="#tutorial_visual_studio_natvis">Visual Studio Natvis</a></li>
<li><a href="#tutorial_gdb_pretty_printer">GDB Pretty-Printer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration">Choosing a Filter Configuration</a></li>
<li><a href="#benchmarks">Benchmarks</a>
<ul class="sectlevel2">
<li><a href="#benchmarks_gcc_14_x64">GCC 14, x64</a></li>
<li><a href="#benchmarks_clang_18_x64">Clang 18, x64</a></li>
<li><a href="#benchmarks_clang_15_arm64">Clang 15, ARM64</a></li>
<li><a href="#benchmarks_vs_2022_x64">VS 2022, x64</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a>
<ul class="sectlevel2">
<li><a href="#header_bloom"><code>&lt;boost/bloom.hpp&gt;</code></a></li>
<li><a href="#header_filter"><code>&lt;boost/bloom/filter.hpp&gt;</code></a></li>
<li><a href="#filter">Class Template <code>filter</code></a>
<ul class="sectlevel3">
<li><a href="#filter_synopsis">Synopsis</a></li>
<li><a href="#filter_description">Description</a></li>
<li><a href="#filter_types_and_constants">Types and Constants</a></li>
<li><a href="#filter_constructors">Constructors</a></li>
<li><a href="#filter_destructor">Destructor</a></li>
<li><a href="#filter_assignment">Assignment</a></li>
<li><a href="#filter_capacity">Capacity</a></li>
<li><a href="#filter_data_access">Data Access</a></li>
<li><a href="#filter_modifiers">Modifiers</a></li>
<li><a href="#filter_observers">Observers</a></li>
<li><a href="#filter_lookup">Lookup</a></li>
<li><a href="#filter_comparison">Comparison</a></li>
<li><a href="#filter_swap_2">Swap</a></li>
</ul>
</li>
<li><a href="#subfilter">Subfilters</a>
<ul class="sectlevel3">
<li><a href="#subfilters_used_value_size"><em>used-value-size</em></a></li>
</ul>
</li>
<li><a href="#header_block"><code>&lt;boost/bloom/block.hpp&gt;</code></a></li>
<li><a href="#block">Class Template <code>block</code></a>
<ul class="sectlevel3">
<li><a href="#block_synopsis">Synopsis</a></li>
<li><a href="#block_description">Description</a></li>
</ul>
</li>
<li><a href="#header_multiblock"><code>&lt;boost/bloom/multiblock.hpp&gt;</code></a></li>
<li><a href="#multiblock">Class Template <code>multiblock</code></a>
<ul class="sectlevel3">
<li><a href="#multiblock_synopsis">Synopsis</a></li>
<li><a href="#multiblock_description">Description</a></li>
</ul>
</li>
<li><a href="#header_fast_multiblock32"><code>&lt;boost/bloom/fast_multiblock32.hpp&gt;</code></a></li>
<li><a href="#fast_multiblock32">Class Template <code>fast_multiblock32</code></a>
<ul class="sectlevel3">
<li><a href="#fast_multiblock32_synopsis">Synopsis</a></li>
<li><a href="#fast_multiblock32_description">Description</a></li>
</ul>
</li>
<li><a href="#header_fast_multiblock64"><code>&lt;boost/bloom/fast_multiblock64.hpp&gt;</code></a></li>
<li><a href="#fast_multiblock64">Class Template <code>fast_multiblock64</code></a>
<ul class="sectlevel3">
<li><a href="#fast_multiblock64_synopsis">Synopsis</a></li>
<li><a href="#fast_multiblock64_description">Description</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#future_work">Future Work</a>
<ul class="sectlevel2">
<li><a href="#future_work_bulk_operations">Bulk operations</a></li>
<li><a href="#future_work_try_insert"><code>try_insert</code></a></li>
<li><a href="#future_work_estimation_of_number_of_elements_inserted">Estimation of number of elements inserted</a></li>
<li><a href="#future_work_run_time_specification_of_k">Run-time specification of <em>k</em></a></li>
<li><a href="#future_work_alternative_filters">Alternative filters</a></li>
</ul>
</li>
<li><a href="#fpr_estimation">Appendix A: FPR Estimation</a></li>
<li><a href="#implementation_notes">Appendix B: Implementation Notes</a>
<ul class="sectlevel2">
<li><a href="#implementation_notes_hash_mixing">Hash Mixing</a></li>
<li><a href="#implementation_notes_32_bit_mode">32-bit mode</a></li>
<li><a href="#implementation_notes_dispensing_with_multiple_hash_functions">Dispensing with Multiple Hash Functions</a>
<ul class="sectlevel3">
<li><a href="#implementation_notes_subarray_location">Subarray Location</a></li>
<li><a href="#implementation_notes_bit_selection">Bit selection</a></li>
</ul>
</li>
<li><a href="#implementation_notes_simd_algorithms">SIMD algorithms</a>
<ul class="sectlevel3">
<li><a href="#implementation_notes_fast_multiblock32"><code>fast_multiblock32</code></a></li>
<li><a href="#implementation_notes_fast_multiblock64"><code>fast_multiblock64</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#release_notes">Release Notes</a>
<ul class="sectlevel2">
<li><a href="#release_notes_boost_1_89">Boost 1.89</a></li>
</ul>
</li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
<li><a href="#copyright">Copyright and License</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.imageblock > .title {
  text-align: inherit;
}

.indent {
  padding-left: 2rem;
}

.bordered_table th, .bordered_table td {
  border: 1px solid lightgray;
}

.formula-center {
  display: block;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  text-align: center;
}
</style>
</div>
</div>
<div class="sect1">
<h2 id="intro"><a class="link" href="#intro">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Boost.Bloom provides the class template <code><a href="#tutorial">boost::bloom::filter</a></code>
that can be configured to implement a classical Bloom filter as well as
variations discussed in the literature such as block filters, multiblock filters,
and more.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;boost/bloom.hpp&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cassert&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">// Bloom filter of strings with 5 bits set per insertion</span>
  <span class="k">using</span> <span class="n">filter</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">bloom</span><span class="o">::</span><span class="n">filter</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="mi">5</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="c1">// create filter with a capacity of 1'000'000 <strong>bits</strong></span>
  <span class="n">filter</span> <span class="n">f</span><span class="p">(</span><span class="mi">1'000'000</span><span class="p">);</span>

  <span class="c1">// insert elements (they can't be erased, Bloom filters are insert-only)</span>
  <span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
  <span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"Boost"</span><span class="p">);</span>

  <span class="c1">// elements inserted are always correctly checked as such</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span> <span class="o">==</span> <span class="nb">true</span><span class="p">);</span>

  <span class="c1">// elements not inserted may incorrectly be identified as such with a</span>
  <span class="c1">// false positive rate (FPR) which is a function of the array capacity,</span>
  <span class="c1">// the number of bits set per element and generally how the boost::bloom::filter</span>
  <span class="c1">// was specified</span>
  <span class="k">if</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="s">"bye"</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// likely false</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"false positive</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"everything worked as expected</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The different filter variations supported are specified at compile time
as part of the <code>boost::bloom::filter</code> instantiation definition.
Boost.Bloom has been implemented with a focus on performance;
SIMD technologies such as AVX2, Neon and SSE2 can be leveraged to speed up
operations.</p>
</div>
<div class="sect2">
<h3 id="intro_getting_started"><a class="link" href="#intro_getting_started">Getting Started</a></h3>
<div class="paragraph">
<p>Consult the website
<a href="https://www.boost.org/doc/user-guide/getting-started.html" target="_blank" rel="noopener">section</a>
on how to install the entire Boost project or only Boost.Bloom
and its dependencies.</p>
</div>
<div class="paragraph">
<p>Boost.Bloom is a header-only library, so no additional build phase is
needed. C++11 or later required. The library has been verified to
work with GCC 4.8, Clang 3.9 and Visual Studio 2015 (and later versions
of those). You can check that your environment is correctly set up
by compiling the
<a href="../../example/basic.cpp">example program</a> shown above.</p>
</div>
<div class="paragraph">
<p>If you are not familiar with Bloom filters in general, see the
<a href="#primer">primer</a>; otherwise, you can jump directly to the
<a href="#tutorial">tutorial</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="primer"><a class="link" href="#primer">Bloom Filter Primer</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Bloom filter (named after its inventor Burton Howard Bloom) is a probabilistic data
structure where inserted elements can be looked up with 100% accuracy, whereas looking
up for a non-inserted element may fail with some probability called the filter&#8217;s
<em>false positive rate</em> or FPR. The tradeoff here is that Bloom filters occupy much less
space than traditional non-probabilistic containers (typically, around 8-20 bits per
element) for an acceptably low FPR. The greater the filter&#8217;s <em>capacity</em> (its size in bits),
the lower the resulting FPR.</p>
</div>
<div class="paragraph">
<p>In general, Bloom filters are useful to prevent/mitigate queries against large data sets
when exact retrieval is costly and/or can&#8217;t be made in main memory.</p>
</div>
<div class="exampleblock boxed">
<div class="content">
<div class="paragraph">
<p><strong>Example: Speeding up unsuccessful requests to a database</strong></p>
</div>
<div class="paragraph">
<p>One prime application of Bloom filters and similar data structures is for the prevention
of expensive disk/network accesses when these would fail to retrieve a given piece of
information.
For instance, suppose we are developing a frontend for a database with access time
10 ms and we know 50% of the requests will not succeed (the record does not exist).
Inserting a Bloom filter with a lookup time of 200 ns and a FPR of 0.5% will reduce the
average response time of the system from 10 ms to</p>
</div>
<div class="paragraph formula-center">
<p>(10 + 0.0002) &times; 50.25% + 0.0002 &times; 49.75% &cong; 5.03 ms,</p>
</div>
<div class="paragraph">
<p>that is, we get a &times;1.99 overall speedup. If the database holds 1 billion records,
an in-memory filter with say 8 bits per element will occupy 0.93 GB,
which is perfectly realizable.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/db_speedup.png" alt="db speedup">
</div>
<div class="title">Figure 1. Improving DB negative access time with a Bloom filter.</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Applications have been described in the areas of web caching,
dictionary compression, network routing and genomics, among others.
<a href="https://www.eecs.harvard.edu/~michaelm/postscripts/im2005b.pdf" target="_blank" rel="noopener">Broder and Mitzenmacher</a>
provide a rather extensive review of use cases with a focus on networking.</p>
</div>
<div class="sect2">
<h3 id="primer_implementation"><a class="link" href="#primer_implementation">Implementation</a></h3>
<div class="paragraph">
<p>The implementation of a classical Bloom filter consists of an array of <em>m</em> bits, initially set to zero.
Inserting an element <em>x</em> reduces to selecting <em>k</em> positions pseudorandomly (with the help
of <em>k</em> independent hash functions) and setting them to one.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/bloom_insertion.png" alt="bloom insertion">
</div>
<div class="title">Figure 2. Insertion in a classical Bloom filter with <em>k</em> = 6 different hash functions. Inserting <em>x</em> reduces to setting to one the bits at positions 10, 14, 43, 58, 1, and 39 as indicated by <em>h</em><sub>1</sub>(<em>x</em>), &#8230;&#8203; , <em>h</em><sub>6</sub>(<em>x</em>).</div>
</div>
<div class="paragraph">
<p>To check if an element <em>y</em> is in the filter, we follow the same procedure and see if
the selected bits are all set to one. In the example figure there are two unset bits, which
definitely indicates <em>y</em> was not inserted in the filter.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/bloom_lookup.png" alt="bloom lookup">
</div>
<div class="title">Figure 3. Lookup in a classical Bloom filter. Value <em>y</em> is not in the filter because bits at positions 20 and 61 are not set to one.</div>
</div>
<div class="paragraph">
<p>A false positive occurs when the bits checked happen to be all set to one due to
other, unrelated insertions. The probability of having a false positive increases as we
add more elements to the filter, whereas for a given number <em>n</em> of inserted elements, a filter
with greater capacity (larger bit array) will have a lower FPR.
The number <em>k</em> of bits set per operation also affects the FPR, albeit in a more complicated way:
when the array is sparsely populated, a higher value of <em>k</em> improves (decreases) the FPR,
as there are more chances that we hit a non-set bit; however, if <em>k</em> is very high
the array will have more and more bits set to one as new elements are inserted, which
eventually will reach a point where we lose out to a filter with a lower <em>k</em> and
thus a smaller proportions of set bits. For given values of <em>n</em> and <em>m</em>, the optimum <em>k</em> is
<font style="font-size:90%">\(\lfloor k_{\text{opt}}\rfloor\)</font> or
<font style="font-size:90%">\(\lceil k_{\text{opt}}\rceil\)</font>, with</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(k_{\text{opt}}=\displaystyle\frac{m\cdot\ln2}{n},\)</font></p>
</div>
<div class="paragraph">
<p>for a minimum FPR close to
<font style="font-size:90%">\(1/2^{k_{\text{opt}}} \approx 0.6185^{m/n}\)</font>. See the appendix
on <a href="#fpr_estimation">FPR estimation</a> for more details.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/fpr_n_k.png" alt="fpr n k">
</div>
<div class="title">Figure 4. FPR vs. number of inserted elements for two filters with <em>m</em> = 10<sup>5</sup> bits. <em>k</em> = 6 (red) has a better (lower) FPR than <em>k</em> = 2 (blue) for small values of <em>n</em>, but eventually degrades more as <em>n</em> grows. The dotted line shows the minimum attainable FPR resulting from selecting the optimum value of <em>k</em> for each value of <em>n</em>.</div>
</div>
</div>
<div class="sect2">
<h3 id="primer_variations_on_the_classical_filter"><a class="link" href="#primer_variations_on_the_classical_filter">Variations on the Classical Filter</a></h3>
<div class="sect3">
<h4 id="primer_block_filters"><a class="link" href="#primer_block_filters">Block Filters</a></h4>
<div class="paragraph">
<p>An operation on a Bloom filter involves accessing <em>k</em> different positions in memory,
which, for large arrays, results in <em>k</em> CPU cache misses and affects the
operation&#8217;s performance. A variation on the classical approach called a
<em>block filter</em> seeks to minimize cache misses by concentrating all bit
setting/checking in a small block of <em>b</em> bits pseudorandomly selected from the
entire array. If the block is small enough, it will fit in a CPU cacheline,
thus drastically reducing the number of cache misses.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/block_insertion.png" alt="block insertion">
</div>
<div class="title">Figure 5. Block filter. A block of <em>b</em> bits is selected based on <em>h</em><sub>0</sub>(x), and all subsequent bit setting is constrained there.</div>
</div>
<div class="paragraph">
<p>The downside is that the resulting FPR is worse than that of a classical filter for
the same values of <em>n</em>, <em>m</em> and <em>k</em>. Intuitively, block filters reduce the
uniformity of the distribution of bits in the array, which ultimately hurts their
probabilistic performance.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/fpr_n_k_bk.png" alt="fpr n k bk">
</div>
<div class="title">Figure 6. FPR (logarithmic scale) vs. number of inserted elements for a classical and a block filter with the same <em>k</em> = 4, <em>m</em> = 10<sup>5</sup> bits.</div>
</div>
<div class="paragraph">
<p>A further variation in this idea is to have operations select <em>k</em> blocks
with <em>k'</em> bits set on each. This, again, will have a worse FPR than a classical
filter with <em>k&middot;k'</em> bits per operation, but improves on a plain
<em>k&middot;k'</em> block filter.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/block_multi_insertion.png" alt="block multi insertion">
</div>
<div class="title">Figure 7. Block filter with multi-insertion. <em>k</em> = 2 blocks are selected, and <em>k</em>' = 3 bits are set in each.</div>
</div>
</div>
<div class="sect3">
<h4 id="primer_multiblock_filters"><a class="link" href="#primer_multiblock_filters">Multiblock Filters</a></h4>
<div class="paragraph">
<p><em>Multiblock filters</em> take block filters' approach further by having
bit setting/checking done on a sequence of consecutive blocks of size <em>b</em>,
so that each block takes exactly one bit. This still maintains a good cache
locality but improves FPR with respect to block filters because bits set to one
are more spread out across the array.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/multiblock_insertion.png" alt="multiblock insertion">
</div>
<div class="title">Figure 8. Multiblock filter. A range of <em>k</em>' = 4 consecutive blocks is selected based on <em>h</em><sub>0</sub>(x), and a bit is set to one in each of the blocks.</div>
</div>
<div class="paragraph">
<p>Multiblock filters can also be combined with multi-insertion. In general,
for the same number of bits per operation and equal values of <em>n</em> and <em>m</em>,
a classical Bloom filter will have the better (lower) FPR, followed by
multiblock filters and then block filters. Execution speed will roughly go
in the reverse order. When considering block/multiblock filters with
multi-insertion, the number of available configurations grows quickly and
you will need to do some experimenting to locate your preferred point in the
(FPR, capacity, speed) tradeoff space.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tutorial"><a class="link" href="#tutorial">Tutorial</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>boost::bloom::filter</code> can be regarded as a bit array divided into <em>subarrays</em> that
are selected pseudo-randomly (based on a hash function) upon insertion:
each of the subarrays is passed to a <em>subfilter</em> that marks several of its bits according
to some associated strategy.</p>
</div>
<div class="paragraph">
<p>Note that although <code>boost::bloom::filter</code> mimics the interface of a container
and provides operations such as <code>insert</code>, it is actually <em>not</em> a
container: for instance, insertion does not involve the actual storage
of the element in the data stucture, but merely sets some bits in the internal
array based on the hash value of the element.</p>
</div>
<div class="sect2">
<h3 id="tutorial_filter_definition"><a class="link" href="#tutorial_filter_definition">Filter Definition</a></h3>
<div class="listingblock">
<div class="content">
<pre>template&lt;
  typename T, std::size_t K,
  typename Subfilter = block&lt;unsigned char, 1&gt;, std::size_t Stride = 0,
  typename Hash = boost::hash&lt;T&gt;,
  typename Allocator = std::allocator&lt;unsigned char&gt;
&gt;
class filter;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T</code>: Type of the elements inserted.</p>
</li>
<li>
<p><code>K</code>: Number of subarrays marked per insertion.</p>
</li>
<li>
<p><code><a href="#tutorial_subfilter">Subfilter</a></code>: Type of subfilter used.</p>
</li>
<li>
<p><code><a href="#tutorial_stride">Stride</code></a>: Distance in bytes between the initial positions of consecutive subarrays.</p>
</li>
<li>
<p><code><a href="#tutorial_hash">Hash</a></code>: A hash function for <code>T</code>.</p>
</li>
<li>
<p><code>Allocator</code>: An allocator for <code>unsigned char</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="tutorial_subfilter"><a class="link" href="#tutorial_subfilter"><code>Subfilter</code></a></h4>
<div class="paragraph">
<p>A subfilter defines the local strategy for setting or checking bits within
a selected subarray of the bit array. It determines how many bits are
modified per operation, how they are arranged in memory, and how memory is accessed.
The following subfilters are provided:</p>
</div>
<div style="overflow-x: auto;">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Subfilter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Pros</th>
<th class="tableblock halign-left valign-top">Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>block&lt;Block, K'&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets <code>K'</code> bits in a subarray of type <code>Block</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Very fast access time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FPR is worse (higher) the smaller <code>Block</code> is</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multiblock&lt;Block, K'&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets one bit in each of the elements of a <code>Block[K']</code> subarray</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Better (lower) FPR than <code>block&lt;Block, K'&gt;</code> for the same <code>Block</code> type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance may worsen if cacheline boundaries are crossed when accessing the subarray</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fast_multiblock32&lt;K'&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Statistically equivalent to <code>multiblock&lt;uint32_t, K'&gt;</code>, but uses
faster SIMD-based algorithms when SSE2, AVX2 or Neon are enabled at
compile time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always prefer it to <code>multiblock&lt;uint32_t, K'&gt;</code> when SSE2/AVX2/Neon is available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FPR is worse (higher) than <code>fast_multiblock64&lt;K'&gt;</code> for the same <code>K'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fast_multiblock64&lt;K'&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Statistically equivalent to <code>multiblock&lt;uint64_t, K'&gt;</code>, but uses a
faster SIMD-based algorithm when AVX2 is enabled at compile time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always prefer it to <code>multiblock&lt;uint64_t, K'&gt;</code> when AVX2 is available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slower than <code>fast_multiblock32&lt;K'&gt;</code> for the same <code>K'</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>In the table above, <code>Block</code> can be an unsigned integral type
(e.g. <code>unsigned char</code>, <code>uint32_t</code>, <code>uint64_t</code>), or
an array of 2<sup><code>N</code></sup> unsigned integrals (e.g. <code>uint64_t[8]</code>). In general,
the wider <code>Block</code> is, the better (lower) the resulting FPR, but
cache locality worsens and performance may suffer as a result.</p>
</div>
<div class="paragraph">
<p>Note that the total number of of bits set/checked for a
<code>boost::bloom::filter&lt;T, K, <em>subfilter</em>&lt;&#8230;&#8203;, K'&gt;&gt;</code> is <code>K * K'</code>. The
default configuration <code>boost::bloom::filter&lt;T, K&gt;</code> =
<code>boost::bloom::filter&lt;T, K, block&lt;unsigned char, 1&gt;&gt;</code>, which corresponds to a
<a href="#primer_implementation">classical Bloom filter</a>, has the best (lowest) FPR among all filters
with the same number of bits per operation, but is also the slowest: a new
subarray is accessed for each bit set/checked. Consult the
<a href="#benchmarks">benchmarks section</a> to see different tradeoffs between FPR and
performance.</p>
</div>
<div class="paragraph">
<p>Once a subfilter have been selected, the parameter <code>K'</code> can be tuned
to its optimum value (minimum FPR) if the number of elements that will be inserted is
known in advance, as explained in a <a href="#configuration">dedicated section</a>;
otherwise, low values of <code>K'</code> will generally be faster and preferred to
higher values as long as the resulting FPR is at acceptable levels.</p>
</div>
</div>
<div class="sect3">
<h4 id="tutorial_stride"><a class="link" href="#tutorial_stride"><code>Stride</code></a></h4>
<div class="paragraph">
<p>As we have seen, <code>Subfilter</code> defines the subarray (<code>Block</code> in the case of
<code>block&lt;Block, K'&gt;</code>, <code>Block[K']</code> for <code>multiblock&lt;Block, K'&gt;</code>) used by
<code>boost::bloom::filter</code>: contiguous portions of the underlying bit array
are then accessed and treated as those subarrays. The <code>Stride</code> parameter
controls the distance in bytes between the initial positions of
consecutive subarrays.</p>
</div>
<div class="paragraph">
<p>When the default value 0 is used, the stride is automatically set
to the size of the subarrays, and so there&#8217;s no overlapping between them.
If <code>Stride</code> is set to a smaller value than that size, contiguous
subarrays superimpose on one another: the level of overlap is larger
for smaller values of <code>Stride</code>, with maximum overlap happening when
<code>Stride</code> is 1 byte.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/stride.png" alt="stride">
</div>
<div class="title">Figure 9. Two different configurations of <code>Stride</code>: (a) non-overlapping subarrays, (b) overlapping subarrays.<br/>Each subarray is associated to the stride of the same color.</div>
</div>
<div class="paragraph">
<p>As it happens, overlapping improves (decreases) the resulting FPR
with respect to the non-overlapping case, the tradeoff being that
subarrays may not be aligned in memory, which can impact performance
negatively.</p>
</div>
</div>
<div class="sect3">
<h4 id="tutorial_hash"><a class="link" href="#tutorial_hash"><code>Hash</code></a></h4>
<div class="paragraph">
<p>Unlike other Bloom filter implementations requiring several hash functions per operation,
<code>boost::bloom::filter</code> uses only one.
By default, <a href="../../../container_hash/index.html">Boost.ContainerHash</a> is used.
Consult this library&#8217;s <a href="../../../container_hash/doc/html/hash.html#user">dedicated section</a>
if you need to extend <code>boost::hash</code> for your own types.</p>
</div>
<div class="paragraph">
<p>When the provided hash function is of sufficient quality, it is used
as is; otherwise, a bit-mixing post-process is applied to hash values that improves
their statistical properties so that the resulting FPR approaches its
theoretical limit. The hash function is determined to be of high quality
(more precisely, to have the so-called <em>avalanching</em> property) via the
<code><a href="../../../container_hash/doc/html/hash.html#ref_hash_is_avalanchinghash">boost::hash_is_avalanching</a></code>
trait.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tutorial_capacity"><a class="link" href="#tutorial_capacity">Capacity</a></h3>
<div class="paragraph">
<p>The size of the filter&#8217;s internal array is specified at construction time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">using</span> <span class="n">filter</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">bloom</span><span class="o">::</span><span class="n">filter</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="mi">8</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">filter</span> <span class="nf">f</span><span class="p">(</span><span class="mi">1'000'000</span><span class="p">);</span> <span class="c1">// array of 1'000'000 <strong>bits</strong></span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">capacity</span><span class="p">();</span> <span class="c1">// &gt;= 1'000'000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>boost::bloom::filter</code> default constructor specifies a capacity
of zero, which in general won&#8217;t be of much use&#8201;&#8212;&#8201;the assigned array
is null.</p>
</div>
<div class="paragraph">
<p>Instead of specifying the array&#8217;s capacity directly, we can let the library
figure it out based on the number of elements we plan to insert and the
desired FPR:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// we'll insert 100'000 elements and want a FPR ~ 1%</span>
<span class="n">filter</span> <span class="nf">f</span><span class="p">(</span><span class="mi">100'000</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">);</span>

<span class="c1">// this is equivalent</span>
<span class="n">filter</span> <span class="nf">f2</span><span class="p">(</span><span class="n">filter</span><span class="o">::</span><span class="n">capacity_for</span><span class="p">(</span><span class="mi">100'000</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Be careful when the FPR specified is very small, as the resulting capacity
may be too large to fit in memory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// resulting capacity ~ 1.4E12, out of memory std::bad_alloc is thrown</span>
<span class="n">filter</span> <span class="nf">f3</span><span class="p">(</span><span class="mi">100'000</span><span class="p">,</span> <span class="mf">1E-50</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a filter is constructed, its array is fixed (for instance, it won&#8217;t
grow dynamically as elements are inserted). The only way to change it is
by assignment/swapping from a different filter, or using <code>reset</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">f</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="mi">2'000'000</span><span class="p">);</span> <span class="c1">// change to 2'000'000 bits <strong>and clears the filter</strong></span>
<span class="n">f</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="mi">100'000</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">);</span> <span class="c1">// equivalent to reset(filter::capacity_for(100'000, 0.005));</span>
<span class="n">f</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span> <span class="c1">// null array (capacity == 0)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tutorial_insertion_and_lookup"><a class="link" href="#tutorial_insertion_and_lookup">Insertion and Lookup</a></h3>
<div class="paragraph">
<p>Insertion is done in much the same way as with a traditional container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
<span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">data</span><span class="p">.</span><span class="n">end</span><span class="p">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, in this context "insertion" does not involve any actual
storage of elements into the filter, but rather the setting of bits in the
internal array based on the hash values of those elements.
Lookup goes as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="kt">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span> <span class="c1">// b1 is true since we actually inserted "hello"</span>
<span class="kt">bool</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="s">"bye"</span><span class="p">);</span> <span class="c1">// b2 is most likely false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As its name suggests, <code>may_contain</code> can return <code>true</code> even if the
element has not been previously inserted, that is, it may yield false
positives&#8201;&#8212;&#8201;this is the essence of probabilistic data structures.
<code>fpr_for</code> provides an estimation of the false positive rate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// we have inserted 100 elements so far, what's our FPR?</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span> <span class="n">filter</span><span class="o">::</span><span class="n">fpr_for</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">capacity</span><span class="p">());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in the example we provided the number 100 externally:
<code>boost::bloom::filter</code> does not keep track of the number of elements
that have been inserted&#8201;&#8212;&#8201;in other words, it does not have a <code>size</code>
operation.</p>
</div>
<div class="paragraph">
<p>Once inserted, there is no way to remove a specific element from the filter.
We can only clear up the filter entirely:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">f</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="c1">// sets all the bits in the array to zero</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tutorial_filter_combination"><a class="link" href="#tutorial_filter_combination">Filter Combination</a></h3>
<div class="paragraph">
<p><code>boost::bloom::filter</code>s can be combined by doing the OR logical operation
of the bits of their arrays:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">filter</span> <span class="n">f2</span> <span class="o">=</span> <span class="p">...;</span>
<span class="p">...</span>
<span class="n">f</span> <span class="o">|=</span> <span class="n">f2</span><span class="p">;</span> <span class="c1">// f and f2 must have exactly the same capacity</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is equivalent to a filter "containing" the set union of the elements
of <code>f</code> and <code>f2</code>. AND combination, on the other hand, results in a filter
holding the <em>intersection</em> of the elements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">filter</span> <span class="n">f3</span> <span class="o">=</span> <span class="p">...;</span>
<span class="p">...</span>
<span class="n">f</span> <span class="o">&amp;=</span> <span class="n">f3</span><span class="p">;</span> <span class="c1">// f and f3 must have exactly the same capacity</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For AND combination, be aware that the resulting FPR will be in general
worse (higher) than if the filter had been constructed from scratch
by inserting only the commom elements&#8201;&#8212;&#8201;don&#8217;t trust <code>fpr_for</code> in this
case.</p>
</div>
</div>
<div class="sect2">
<h3 id="tutorial_direct_access_to_the_array"><a class="link" href="#tutorial_direct_access_to_the_array">Direct Access to the Array</a></h3>
<div class="paragraph">
<p>The contents of the bit array can be accessed directly with the <code>array</code>
member function, which can be leveraged for filter serialization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">filter</span> <span class="n">f1</span> <span class="o">=</span> <span class="p">...;</span>
<span class="p">...</span>

<span class="c1">// save filter</span>
<span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="nf">out</span><span class="p">(</span><span class="s">"filter.bin"</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">c1</span><span class="o">=</span><span class="n">f1</span><span class="p">.</span><span class="n">capacity</span><span class="p">();</span>
<span class="n">out</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c1</span><span class="p">),</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c1</span><span class="p">));</span> <span class="c1">// save capacity (bits)</span>
<span class="n">boost</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">f1</span><span class="p">.</span><span class="n">array</span><span class="p">();</span>
<span class="n">out</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">data</span><span class="p">()),</span> <span class="n">s1</span><span class="p">.</span><span class="n">size</span><span class="p">());</span> <span class="c1">// save array</span>
<span class="n">out</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="c1">// load filter</span>
<span class="n">filter</span> <span class="n">f2</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="nf">in</span><span class="p">(</span><span class="s">"filter.bin"</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">c2</span><span class="p">;</span>
<span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="n">c2</span><span class="p">),</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c2</span><span class="p">));</span>
<span class="n">f2</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">c2</span><span class="p">);</span> <span class="c1">// restore capacity</span>
<span class="n">boost</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">f2</span><span class="p">.</span><span class="n">array</span><span class="p">();</span>
<span class="n">in</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">s2</span><span class="p">.</span><span class="n">data</span><span class="p">()),</span> <span class="n">s2</span><span class="p">.</span><span class="n">size</span><span class="p">());</span> <span class="c1">// load array</span>
<span class="n">in</span><span class="p">.</span><span class="n">close</span><span class="p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>array()</code> is a span over <code>unsigned char</code>s whereas
capacities are measured in bits, so <code>array.size()</code> is
<code>capacity() / CHAR_BIT</code>. If you load a serialized filter in a computer
other than the one where it was saved, take into account that
the CPU architectures at each end must have the same
<a href="https://es.wikipedia.org/wiki/Endianness" target="_blank" rel="noopener">endianness</a> for the
reconstruction to work.</p>
</div>
</div>
<div class="sect2">
<h3 id="tutorial_debugging"><a class="link" href="#tutorial_debugging">Debugging</a></h3>
<div class="sect3">
<h4 id="tutorial_visual_studio_natvis"><a class="link" href="#tutorial_visual_studio_natvis">Visual Studio Natvis</a></h4>
<div class="paragraph">
<p>Add the <a href="../../extra/boost_bloom.natvis" target="_blank" rel="noopener"><code>boost_bloom.natvis</code></a> visualizer
to your project to allow for user-friendly inspection of <code>boost::bloom::filter</code>s.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/natvis.png" alt="natvis">
</div>
<div class="title">Figure 10. View of a <code>boost::bloom::filter</code> with <code>boost_bloom.natvis</code>.</div>
</div>
</div>
<div class="sect3">
<h4 id="tutorial_gdb_pretty_printer"><a class="link" href="#tutorial_gdb_pretty_printer">GDB Pretty-Printer</a></h4>
<div class="paragraph">
<p><code>boost::bloom::filter</code> comes with a dedicated
<a href="https://sourceware.org/gdb/current/onlinedocs/gdb.html/Pretty-Printing.html#Pretty-Printing" target="_blank" rel="noopener">pretty-printer</a>
for visual inspection when debugging with GDB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plaintext">(gdb) print f
$1 = boost::bloom::filter with {capacity = 2000, data = 0x6da840, size = 250} = {[0] = 0 '\000',
  [1] = 0 '\000', [2] = 0 '\000', [3] = 0 '\000', [4] = 0 '\000', [5] = 1 '\001'...}

(gdb) # boost::bloom::filter does not have an operator[]. The following expression
(gdb) # is used in place of print f.array()[30]
(gdb) print f[30]
$2 = 128 '\200'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember to enable pretty-printing in GDB (typically a one-time setup):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plaintext">(gdb) set print pretty on</code></pre>
</div>
</div>
<div class="paragraph">
<p>The pretty-printer is automatically embedded in the program if your compiled binary
format is ELF and the macro <code>BOOST_ALL_NO_EMBEDDED_GDB_SCRIPTS</code> is <em>not</em> defined;
embedded pretty-printers are enabled for a particular GDB session
with this command (or by default by adding it to your <code>.gdbinit</code> configuration
file):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plaintext">(gdb) add-auto-load-safe-path <em>&lt;path-to-executable&gt;</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively to the use of the embedded pretty-printer, you can explicitly
load the <a href="../../extra/boost_bloom_printers.py" target="_blank" rel="noopener"><code>boost_bloom_printers.py</code></a>
script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plaintext">(gdb) source <em>&lt;path-to-boost&gt;</em>/libs/bloom/extra/boost_bloom_printers.py</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="link" href="#configuration">Choosing a Filter Configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Boost.Bloom offers a plethora of compile-time and run-time configuration options,
so it may be difficult to make a choice.
If you&#8217;re aiming for a given FPR or have a particular capacity in mind and
you&#8217;d like to choose the most appropriate filter type, the following chart
may come handy.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../img/fpr_c.png" alt="fpr c">
</div>
<div class="title">Figure 11. FPR vs. <em>c</em> for different filter types.</div>
</div>
<div class="paragraph">
<p>The chart plots FPR vs. <em>c</em> (capacity / number of elements inserted) for several
<code>boost::bloom::filter</code>s where <code>K</code> has been set to its optimum value (minimum FPR)
as shown in the table below.</p>
</div>
<div class="paragraph">
<p>
<div style="overflow-x: auto;">
<table class="bordered_table" style="text-align: center; font-size: 85%;">
    <tr>
        <th rowspan="2"></th>
		<th colspan="21"><i>c</i> = capacity / number of elements inserted</th>
	</tr>
    <tr>
        <th>4</th> <th>5</th> <th>6</th> <th>7</th> <th>8</th> <th>9</th> <th>10</th> <th>11</th> <th>12</th> <th>13</th>
        <th>14</th> <th>15</th> <th>16</th> <th>17</th> <th>18</th> <th>19</th> <th>20</th> <th>21</th> <th>22</th> <th>23</th> <th>24</th>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint32_t,K&gt;&gt;</code></td> <td>3</td> <td>3</td> <td>3</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>5</td> <td>5</td>
        <td>5</td> <td>5</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint32_t,K&gt;,1&gt;</code></td> <td>2</td> <td>3</td> <td>4</td> <td>4</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>6</td>
        <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint64_t,K&gt;&gt;</code></td> <td>2</td> <td>3</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>5</td> <td>5</td> <td>6</td>
        <td>6</td> <td>6</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>7</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint64_t,K&gt;,1&gt;</code></td> <td>2</td> <td>3</td> <td>4</td> <td>4</td> <td>4</td> <td>5</td> <td>6</td> <td>6</td> <td>6</td> <td>7</td>
        <td>7</td> <td>7</td> <td>7</td> <td>7</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td> <td>9</td> <td>9</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,multiblock&lt;uint32_t,K&gt;&gt;</code></td> <td>3</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>6</td> <td>8</td> <td>8</td> <td>8</td> <td>8</td>
        <td>9</td> <td>9</td> <td>9</td> <td>10</td> <td>13</td> <td>13</td> <td>15</td> <td>15</td> <td>15</td> <td>16</td> <td>16</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint64_t[8],K&gt;&gt;</code></td> <td>4</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>8</td>
		<td>8</td> <td>9</td> <td>9</td> <td>10</td> <td>10</td> <td>11</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,multiblock&lt;uint32_t,K&gt;,1&gt;</code></td> <td>3</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>8</td> <td>8</td>
        <td>9</td> <td>9</td> <td>10</td> <td>10</td> <td>12</td> <td>12</td> <td>14</td> <td>14</td> <td>14</td> <td>14</td> <td>15</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,block&lt;uint64_t[8],K&gt;,1&gt;</code></td> <td>3</td> <td>3</td> <td>4</td> <td>5</td> <td>6</td> <td>6</td> <td>7</td> <td>7</td> <td>7</td> <td>8</td>
		<td>8</td> <td>8</td> <td>10</td> <td>11</td> <td>11</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>12</td> <td>13</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,multiblock&lt;uint64_t,K&gt;&gt;</code></td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>6</td> <td>6</td> <td>6</td> <td>7</td> <td>8</td> <td>8</td>
        <td>10</td> <td>10</td> <td>12</td> <td>13</td> <td>14</td> <td>15</td> <td>15</td> <td>15</td> <td>15</td> <td>16</td> <td>17</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,1,multiblock&lt;uint64_t,K&gt;,1&gt;</code></td> <td>3</td> <td>3</td> <td>4</td> <td>5</td> <td>5</td> <td>6</td> <td>6</td> <td>7</td> <td>9</td> <td>10</td>
        <td>10</td> <td>11</td> <td>11</td> <td>12</td> <td>12</td> <td>13</td> <td>13</td> <td>13</td> <td>15</td> <td>16</td> <td>16</td>
    </tr>
    <tr>
        <td style="text-align: left;"><code>filter&lt;T,K&gt;</code></td> <td>3</td> <td>4</td> <td>4</td> <td>5</td> <td>5</td> <td>6</td> <td>6</td> <td>8</td> <td>8</td> <td>9</td>
        <td>10</td> <td>11</td> <td>12</td> <td>13</td> <td>13</td> <td>13</td> <td>14</td> <td>16</td> <td>16</td> <td>16</td> <td>17</td>
    </tr>
</table>
</div>
</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how this can be used by way of an example. Suppose we plan to insert 10M elements
and want to keep the FPR at 10<sup>&minus;4</sup>. The chart gives us five different
values of <em>c</em> (the array capacity divided by the number of elements, in our case 10M):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filter&lt;T, K&gt;</code> &#8594; <em>c</em> &cong; 19 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, multiblock&lt;uint64_t, K&gt;, 1&gt;</code> &#8594; <em>c</em> &cong; 20 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, multiblock&lt;uint64_t, K&gt;&gt;</code> &#8594; <em>c</em> &cong; 21 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, block&lt;uint64_t[8], K&gt;, 1&gt;</code> &#8594; <em>c</em> &cong; 21 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, multiblock&lt;uint32_t, K&gt;, 1&gt;</code> &#8594; <em>c</em> &cong; 21.5 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, block&lt;uint64_t[8], K&gt;&gt;</code> &#8594; <em>c</em> &cong; 22 bits per element</p>
</li>
<li>
<p><code>filter&lt;T, 1, multiblock&lt;uint32_t, K&gt;&gt;</code> &#8594; <em>c</em> &cong; 23 bits per element</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These options have different tradeoffs in terms of space used and performance. If
we choose <code>filter&lt;T, 1, multiblock&lt;uint32_t, K&gt;, 1&gt;</code> as a compromise (or better yet,
<code>filter&lt;T, 1, fast_multiblock32&lt;K&gt;, 1&gt;</code>), the only remaining step is to consult the
value of <code>K</code> in the table for <em>c</em> = 21 or 22, and we get our final configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">using</span> <span class="n">my_filter</span><span class="o">=</span><span class="n">filter</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fast_multiblock32</span><span class="o">&lt;<strong></span><span class="mi">14</span><span class="o"></strong>&gt;</span><span class="p">,</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting filter can be constructed in any of the following ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// 1) calculate the capacity from the value of c we got from the chart</span>
<span class="n">my_filter</span> <span class="nf">f</span><span class="p">((</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">)(</span><span class="mi">10'000'000</span> <span class="o">*</span> <span class="mf">21.5</span><span class="p">));</span>

<span class="c1">// 2) let the library calculate the capacity from n and target fpr</span>
<span class="c1">// expect some deviation from the capacity in 1)</span>
<span class="n">my_filter</span> <span class="nf">f</span><span class="p">(</span><span class="mi">10'000'000</span><span class="p">,</span> <span class="mf">1E-4</span><span class="p">);</span>

<span class="c1">// 3) equivalent to 2)</span>
<span class="n">my_filter</span> <span class="nf">f</span><span class="p">(</span><span class="n">my_filter</span><span class="o">::</span><span class="n">capacity_for</span><span class="p">(</span><span class="mi">10'000'000</span><span class="p">,</span> <span class="mf">1E-4</span><span class="p">));</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="benchmarks"><a class="link" href="#benchmarks">Benchmarks</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>(More results in a
<a href="https://github.com/boostorg/boost_bloom_benchmarks" target="_blank" rel="noopener">dedicated repo</a>.)</p>
</div>
<div class="paragraph">
<p>The tables show the false positive rate and execution times in nanoseconds per operation
for several configurations of <code>boost::bloom::filter&lt;int, ...&gt;</code> where 10M elements have
been inserted.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ins.:</strong> Insertion.</p>
</li>
<li>
<p><strong>succ. lkp.:</strong> Successful lookup (the element is in the filter).</p>
</li>
<li>
<p><strong>uns. lkp.:</strong> Unsuccessful lookup (the element is not in the filter, though lookup may return <code>true</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Filters are constructed with a capacity <code>c * N</code> (bits), so <code>c</code> is the number of
bits used per element. For each combination of <code>c</code> and a given filter configuration, we have
selected the optimum value of <code>K</code> (that yielding the minimum FPR).
Standard release-mode settings are used; AVX2 is indicated for Visual Studio builds
(<code>/arch:AVX2</code>) and GCC/Clang builds (<code>-march=native</code>), which causes
<code>fast_multiblock32</code> and <code>fast_multiblock64</code> to use their AVX2 variant.</p>
</div>
<div class="sect2">
<h3 id="benchmarks_gcc_14_x64"><a class="link" href="#benchmarks_gcc_14_x64">GCC 14, x64</a></h3>
<div class="paragraph">
<p>
<div style="overflow-x: auto;">
<table class="bordered_table" style="font-size: 85%;">
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,K></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">6</td>
    <td align="right">2.1519</td>
    <td align="right">14.04</td>
    <td align="right">15.82</td>
    <td align="right">20.84</td>
    <td align="center">4</td>
    <td align="right">3.3467</td>
    <td align="right">5.82</td>
    <td align="right">6.50</td>
    <td align="right">6.54</td>
    <td align="center">5</td>
    <td align="right">3.0383</td>
    <td align="right">5.46</td>
    <td align="right">6.13</td>
    <td align="right">6.15</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">9</td>
    <td align="right">0.3180</td>
    <td align="right">47.65</td>
    <td align="right">52.28</td>
    <td align="right">27.38</td>
    <td align="center">5</td>
    <td align="right">1.0300</td>
    <td align="right">10.07</td>
    <td align="right">10.98</td>
    <td align="right">10.98</td>
    <td align="center">6</td>
    <td align="right">0.8268</td>
    <td align="right">11.52</td>
    <td align="right">12.52</td>
    <td align="right">12.49</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0469</td>
    <td align="right">83.25</td>
    <td align="right">99.75</td>
    <td align="right">34.96</td>
    <td align="center">6</td>
    <td align="right">0.4034</td>
    <td align="right">18.34</td>
    <td align="right">18.38</td>
    <td align="right">18.39</td>
    <td align="center">7</td>
    <td align="right">0.2883</td>
    <td align="right">18.97</td>
    <td align="right">19.08</td>
    <td align="right">19.08</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">14</td>
    <td align="right">0.0065</td>
    <td align="right">125.12</td>
    <td align="right">135.16</td>
    <td align="right">39.56</td>
    <td align="center">7</td>
    <td align="right">0.1887</td>
    <td align="right">21.87</td>
    <td align="right">21.99</td>
    <td align="right">21.99</td>
    <td align="center">8</td>
    <td align="right">0.1194</td>
    <td align="right">22.85</td>
    <td align="right">25.21</td>
    <td align="right">25.17</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4510</td>
    <td align="right">6.42</td>
    <td align="right">7.10</td>
    <td align="right">7.12</td>
    <td align="center">5</td>
    <td align="right">2.3157</td>
    <td align="right">7.23</td>
    <td align="right">8.98</td>
    <td align="right">8.96</td>
    <td align="center">5</td>
    <td align="right">2.7361</td>
    <td align="right">5.90</td>
    <td align="right">5.67</td>
    <td align="right">5.70</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4207</td>
    <td align="right">13.45</td>
    <td align="right">17.14</td>
    <td align="right">17.16</td>
    <td align="center">8</td>
    <td align="right">0.3724</td>
    <td align="right">16.49</td>
    <td align="right">20.61</td>
    <td align="right">20.65</td>
    <td align="center">8</td>
    <td align="right">0.5415</td>
    <td align="right">7.63</td>
    <td align="right">7.92</td>
    <td align="right">7.97</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0764</td>
    <td align="right">29.25</td>
    <td align="right">30.26</td>
    <td align="right">30.26</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">34.90</td>
    <td align="right">35.52</td>
    <td align="right">35.29</td>
    <td align="center">11</td>
    <td align="right">0.1179</td>
    <td align="right">19.11</td>
    <td align="right">20.64</td>
    <td align="right">14.95</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0150</td>
    <td align="right">38.40</td>
    <td align="right">39.18</td>
    <td align="right">39.20</td>
    <td align="center">14</td>
    <td align="right">0.0122</td>
    <td align="right">40.68</td>
    <td align="right">50.85</td>
    <td align="right">50.24</td>
    <td align="center">13</td>
    <td align="right">0.0275</td>
    <td align="right">22.00</td>
    <td align="right">23.66</td>
    <td align="right">16.68</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4788</td>
    <td align="right">4.24</td>
    <td align="right">3.92</td>
    <td align="right">3.96</td>
    <td align="center">5</td>
    <td align="right">2.4546</td>
    <td align="right">5.59</td>
    <td align="right">5.86</td>
    <td align="right">5.89</td>
    <td align="center">5</td>
    <td align="right">2.3234</td>
    <td align="right">5.97</td>
    <td align="right">6.01</td>
    <td align="right">5.92</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4394</td>
    <td align="right">8.19</td>
    <td align="right">8.03</td>
    <td align="right">8.03</td>
    <td align="center">8</td>
    <td align="right">0.4210</td>
    <td align="right">8.75</td>
    <td align="right">9.69</td>
    <td align="right">9.74</td>
    <td align="center">8</td>
    <td align="right">0.3754</td>
    <td align="right">11.13</td>
    <td align="right">12.23</td>
    <td align="right">12.20</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0865</td>
    <td align="right">18.60</td>
    <td align="right">20.34</td>
    <td align="right">14.59</td>
    <td align="center">11</td>
    <td align="right">0.0781</td>
    <td align="right">24.65</td>
    <td align="right">25.86</td>
    <td align="right">21.31</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">23.72</td>
    <td align="right">26.12</td>
    <td align="right">21.53</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0178</td>
    <td align="right">21.80</td>
    <td align="right">23.56</td>
    <td align="right">16.42</td>
    <td align="center">13</td>
    <td align="right">0.0160</td>
    <td align="right">31.93</td>
    <td align="right">36.25</td>
    <td align="right">24.75</td>
    <td align="center">14</td>
    <td align="right">0.0110</td>
    <td align="right">31.64</td>
    <td align="right">36.52</td>
    <td align="right">25.04</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t[8],K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.3292</td>
    <td align="right">7.58</td>
    <td align="right">8.62</td>
    <td align="right">15.62</td>
    <td align="center">6</td>
    <td align="right">2.2986</td>
    <td align="right">13.07</td>
    <td align="right">10.80</td>
    <td align="right">20.72</td>
    <td align="center">7</td>
    <td align="right">2.3389</td>
    <td align="right">15.28</td>
    <td align="right">15.27</td>
    <td align="right">15.29</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">7</td>
    <td align="right">0.4140</td>
    <td align="right">17.22</td>
    <td align="right">18.44</td>
    <td align="right">18.84</td>
    <td align="center">7</td>
    <td align="right">0.3845</td>
    <td align="right">22.19</td>
    <td align="right">21.28</td>
    <td align="right">20.79</td>
    <td align="center">10</td>
    <td align="right">0.3468</td>
    <td align="right">26.63</td>
    <td align="right">28.35</td>
    <td align="right">28.33</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">9</td>
    <td align="right">0.0852</td>
    <td align="right">27.39</td>
    <td align="right">27.86</td>
    <td align="right">21.79</td>
    <td align="center">10</td>
    <td align="right">0.0714</td>
    <td align="right">35.48</td>
    <td align="right">33.83</td>
    <td align="right">26.65</td>
    <td align="center">11</td>
    <td align="right">0.0493</td>
    <td align="right">45.00</td>
    <td align="right">49.14</td>
    <td align="right">49.05</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">12</td>
    <td align="right">0.0196</td>
    <td align="right">41.61</td>
    <td align="right">42.34</td>
    <td align="right">24.90</td>
    <td align="center">12</td>
    <td align="right">0.0152</td>
    <td align="right">50.90</td>
    <td align="right">50.31</td>
    <td align="right">28.79</td>
    <td align="center">15</td>
    <td align="right">0.0076</td>
    <td align="right">74.41</td>
    <td align="right">73.92</td>
    <td align="right">73.83</td>
  </tr>
</table>
</div>
</p>
</div>
</div>
<div class="sect2">
<h3 id="benchmarks_clang_18_x64"><a class="link" href="#benchmarks_clang_18_x64">Clang 18, x64</a></h3>
<div class="paragraph">
<p>
<div style="overflow-x: auto;">
<table class="bordered_table" style="font-size: 85%;">
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,K></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">6</td>
    <td align="right">2.1519</td>
    <td align="right">13.57</td>
    <td align="right">14.12</td>
    <td align="right">20.85</td>
    <td align="center">4</td>
    <td align="right">3.3467</td>
    <td align="right">5.65</td>
    <td align="right">5.67</td>
    <td align="right">5.63</td>
    <td align="center">5</td>
    <td align="right">3.0383</td>
    <td align="right">5.42</td>
    <td align="right">6.03</td>
    <td align="right">5.98</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">9</td>
    <td align="right">0.3180</td>
    <td align="right">47.85</td>
    <td align="right">49.49</td>
    <td align="right">26.49</td>
    <td align="center">5</td>
    <td align="right">1.0300</td>
    <td align="right">11.03</td>
    <td align="right">10.97</td>
    <td align="right">10.98</td>
    <td align="center">6</td>
    <td align="right">0.8268</td>
    <td align="right">10.64</td>
    <td align="right">11.56</td>
    <td align="right">11.58</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0469</td>
    <td align="right">83.54</td>
    <td align="right">85.35</td>
    <td align="right">31.09</td>
    <td align="center">6</td>
    <td align="right">0.4034</td>
    <td align="right">17.89</td>
    <td align="right">17.95</td>
    <td align="right">17.96</td>
    <td align="center">7</td>
    <td align="right">0.2883</td>
    <td align="right">17.23</td>
    <td align="right">19.07</td>
    <td align="right">19.08</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">14</td>
    <td align="right">0.0065</td>
    <td align="right">120.39</td>
    <td align="right">119.09</td>
    <td align="right">36.47</td>
    <td align="center">7</td>
    <td align="right">0.1887</td>
    <td align="right">21.98</td>
    <td align="right">21.72</td>
    <td align="right">21.72</td>
    <td align="center">8</td>
    <td align="right">0.1194</td>
    <td align="right">14.71</td>
    <td align="right">15.30</td>
    <td align="right">15.26</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4510</td>
    <td align="right">4.32</td>
    <td align="right">5.17</td>
    <td align="right">5.21</td>
    <td align="center">5</td>
    <td align="right">2.3157</td>
    <td align="right">4.10</td>
    <td align="right">4.63</td>
    <td align="right">4.66</td>
    <td align="center">5</td>
    <td align="right">2.7361</td>
    <td align="right">3.56</td>
    <td align="right">3.45</td>
    <td align="right">3.44</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4207</td>
    <td align="right">8.83</td>
    <td align="right">10.55</td>
    <td align="right">10.56</td>
    <td align="center">8</td>
    <td align="right">0.3724</td>
    <td align="right">9.91</td>
    <td align="right">12.46</td>
    <td align="right">12.52</td>
    <td align="center">8</td>
    <td align="right">0.5415</td>
    <td align="right">7.85</td>
    <td align="right">7.54</td>
    <td align="right">7.54</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0764</td>
    <td align="right">19.62</td>
    <td align="right">22.72</td>
    <td align="right">22.75</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">19.05</td>
    <td align="right">22.93</td>
    <td align="right">22.92</td>
    <td align="center">11</td>
    <td align="right">0.1179</td>
    <td align="right">15.19</td>
    <td align="right">16.32</td>
    <td align="right">12.45</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0150</td>
    <td align="right">23.87</td>
    <td align="right">29.73</td>
    <td align="right">29.79</td>
    <td align="center">14</td>
    <td align="right">0.0122</td>
    <td align="right">24.92</td>
    <td align="right">30.80</td>
    <td align="right">30.80</td>
    <td align="center">13</td>
    <td align="right">0.0275</td>
    <td align="right">17.36</td>
    <td align="right">18.34</td>
    <td align="right">13.99</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4788</td>
    <td align="right">3.72</td>
    <td align="right">3.38</td>
    <td align="right">3.36</td>
    <td align="center">5</td>
    <td align="right">2.4546</td>
    <td align="right">4.76</td>
    <td align="right">5.07</td>
    <td align="right">5.02</td>
    <td align="center">5</td>
    <td align="right">2.3234</td>
    <td align="right">5.27</td>
    <td align="right">5.37</td>
    <td align="right">5.25</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4394</td>
    <td align="right">7.60</td>
    <td align="right">7.58</td>
    <td align="right">7.56</td>
    <td align="center">8</td>
    <td align="right">0.4210</td>
    <td align="right">8.66</td>
    <td align="right">9.24</td>
    <td align="right">9.27</td>
    <td align="center">8</td>
    <td align="right">0.3754</td>
    <td align="right">10.28</td>
    <td align="right">11.52</td>
    <td align="right">11.58</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0865</td>
    <td align="right">14.43</td>
    <td align="right">16.09</td>
    <td align="right">11.92</td>
    <td align="center">11</td>
    <td align="right">0.0781</td>
    <td align="right">20.19</td>
    <td align="right">21.55</td>
    <td align="right">17.22</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">18.83</td>
    <td align="right">21.05</td>
    <td align="right">16.85</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0178</td>
    <td align="right">16.64</td>
    <td align="right">18.26</td>
    <td align="right">13.45</td>
    <td align="center">13</td>
    <td align="right">0.0160</td>
    <td align="right">25.12</td>
    <td align="right">29.48</td>
    <td align="right">20.08</td>
    <td align="center">14</td>
    <td align="right">0.0110</td>
    <td align="right">25.37</td>
    <td align="right">26.90</td>
    <td align="right">19.62</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t[8],K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.3292</td>
    <td align="right">7.67</td>
    <td align="right">7.97</td>
    <td align="right">15.08</td>
    <td align="center">6</td>
    <td align="right">2.2986</td>
    <td align="right">13.91</td>
    <td align="right">10.27</td>
    <td align="right">19.76</td>
    <td align="center">7</td>
    <td align="right">2.3389</td>
    <td align="right">13.83</td>
    <td align="right">13.87</td>
    <td align="right">13.86</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">7</td>
    <td align="right">0.4140</td>
    <td align="right">17.06</td>
    <td align="right">15.61</td>
    <td align="right">17.52</td>
    <td align="center">7</td>
    <td align="right">0.3845</td>
    <td align="right">25.80</td>
    <td align="right">21.21</td>
    <td align="right">20.63</td>
    <td align="center">10</td>
    <td align="right">0.3468</td>
    <td align="right">31.17</td>
    <td align="right">32.58</td>
    <td align="right">32.61</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">9</td>
    <td align="right">0.0852</td>
    <td align="right">28.89</td>
    <td align="right">26.74</td>
    <td align="right">21.75</td>
    <td align="center">10</td>
    <td align="right">0.0714</td>
    <td align="right">36.21</td>
    <td align="right">32.66</td>
    <td align="right">24.97</td>
    <td align="center">11</td>
    <td align="right">0.0493</td>
    <td align="right">45.58</td>
    <td align="right">48.10</td>
    <td align="right">47.96</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">12</td>
    <td align="right">0.0196</td>
    <td align="right">43.30</td>
    <td align="right">35.81</td>
    <td align="right">24.25</td>
    <td align="center">12</td>
    <td align="right">0.0152</td>
    <td align="right">52.38</td>
    <td align="right">40.08</td>
    <td align="right">26.46</td>
    <td align="center">15</td>
    <td align="right">0.0076</td>
    <td align="right">78.06</td>
    <td align="right">72.34</td>
    <td align="right">72.55</td>
  </tr>
</table>
</div>
</p>
</div>
</div>
<div class="sect2">
<h3 id="benchmarks_clang_15_arm64"><a class="link" href="#benchmarks_clang_15_arm64">Clang 15, ARM64</a></h3>
<div class="paragraph">
<p>
<div style="overflow-x: auto;">
<table class="bordered_table" style="font-size: 85%;">
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,K></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">6</td>
    <td align="right">2.1519</td>
    <td align="right">7.75</td>
    <td align="right">6.16</td>
    <td align="right">12.93</td>
    <td align="center">4</td>
    <td align="right">3.3467</td>
    <td align="right">2.05</td>
    <td align="right">1.99</td>
    <td align="right">2.00</td>
    <td align="center">5</td>
    <td align="right">3.0383</td>
    <td align="right">2.13</td>
    <td align="right">2.02</td>
    <td align="right">2.04</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">9</td>
    <td align="right">0.3180</td>
    <td align="right">13.15</td>
    <td align="right">11.04</td>
    <td align="right">16.16</td>
    <td align="center">5</td>
    <td align="right">1.0300</td>
    <td align="right">3.50</td>
    <td align="right">3.47</td>
    <td align="right">3.49</td>
    <td align="center">6</td>
    <td align="right">0.8268</td>
    <td align="right">3.22</td>
    <td align="right">3.16</td>
    <td align="right">3.09</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0469</td>
    <td align="right">30.88</td>
    <td align="right">24.03</td>
    <td align="right">18.38</td>
    <td align="center">6</td>
    <td align="right">0.4034</td>
    <td align="right">6.66</td>
    <td align="right">6.31</td>
    <td align="right">6.56</td>
    <td align="center">7</td>
    <td align="right">0.2883</td>
    <td align="right">6.92</td>
    <td align="right">5.98</td>
    <td align="right">5.87</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">14</td>
    <td align="right">0.0065</td>
    <td align="right">53.83</td>
    <td align="right">40.29</td>
    <td align="right">20.91</td>
    <td align="center">7</td>
    <td align="right">0.1887</td>
    <td align="right">9.13</td>
    <td align="right">7.94</td>
    <td align="right">7.86</td>
    <td align="center">8</td>
    <td align="right">0.1194</td>
    <td align="right">7.69</td>
    <td align="right">6.46</td>
    <td align="right">6.74</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4510</td>
    <td align="right">2.70</td>
    <td align="right">2.48</td>
    <td align="right">2.56</td>
    <td align="center">5</td>
    <td align="right">2.3157</td>
    <td align="right">2.70</td>
    <td align="right">2.59</td>
    <td align="right">2.58</td>
    <td align="center">5</td>
    <td align="right">2.7361</td>
    <td align="right">2.38</td>
    <td align="right">2.49</td>
    <td align="right">2.50</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4207</td>
    <td align="right">3.76</td>
    <td align="right">4.62</td>
    <td align="right">4.28</td>
    <td align="center">8</td>
    <td align="right">0.3724</td>
    <td align="right">4.31</td>
    <td align="right">4.64</td>
    <td align="right">4.53</td>
    <td align="center">8</td>
    <td align="right">0.5415</td>
    <td align="right">2.75</td>
    <td align="right">3.44</td>
    <td align="right">3.49</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0764</td>
    <td align="right">10.95</td>
    <td align="right">9.92</td>
    <td align="right">9.78</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">10.68</td>
    <td align="right">9.53</td>
    <td align="right">9.51</td>
    <td align="center">11</td>
    <td align="right">0.1179</td>
    <td align="right">8.69</td>
    <td align="right">8.41</td>
    <td align="right">5.77</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0150</td>
    <td align="right">15.22</td>
    <td align="right">12.68</td>
    <td align="right">12.37</td>
    <td align="center">14</td>
    <td align="right">0.0122</td>
    <td align="right">14.96</td>
    <td align="right">12.90</td>
    <td align="right">12.72</td>
    <td align="center">13</td>
    <td align="right">0.0275</td>
    <td align="right">10.43</td>
    <td align="right">11.08</td>
    <td align="right">6.61</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4788</td>
    <td align="right">2.39</td>
    <td align="right">2.51</td>
    <td align="right">2.54</td>
    <td align="center">5</td>
    <td align="right">2.4510</td>
    <td align="right">2.72</td>
    <td align="right">2.51</td>
    <td align="right">2.55</td>
    <td align="center">5</td>
    <td align="right">2.3157</td>
    <td align="right">2.71</td>
    <td align="right">2.57</td>
    <td align="right">2.59</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4394</td>
    <td align="right">2.94</td>
    <td align="right">3.10</td>
    <td align="right">3.03</td>
    <td align="center">8</td>
    <td align="right">0.4207</td>
    <td align="right">3.70</td>
    <td align="right">3.88</td>
    <td align="right">3.88</td>
    <td align="center">8</td>
    <td align="right">0.3724</td>
    <td align="right">4.26</td>
    <td align="right">4.68</td>
    <td align="right">4.39</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0865</td>
    <td align="right">8.29</td>
    <td align="right">8.49</td>
    <td align="right">5.82</td>
    <td align="center">11</td>
    <td align="right">0.0764</td>
    <td align="right">10.94</td>
    <td align="right">9.88</td>
    <td align="right">9.73</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">11.28</td>
    <td align="right">9.95</td>
    <td align="right">9.82</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0178</td>
    <td align="right">10.41</td>
    <td align="right">10.88</td>
    <td align="right">6.60</td>
    <td align="center">13</td>
    <td align="right">0.0150</td>
    <td align="right">16.00</td>
    <td align="right">12.90</td>
    <td align="right">13.27</td>
    <td align="center">14</td>
    <td align="right">0.0122</td>
    <td align="right">15.77</td>
    <td align="right">13.47</td>
    <td align="right">13.55</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t[8],K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.3292</td>
    <td align="right">4.64</td>
    <td align="right">4.30</td>
    <td align="right">11.29</td>
    <td align="center">6</td>
    <td align="right">2.2986</td>
    <td align="right">8.72</td>
    <td align="right">4.92</td>
    <td align="right">13.50</td>
    <td align="center">7</td>
    <td align="right">2.3389</td>
    <td align="right">8.87</td>
    <td align="right">6.65</td>
    <td align="right">6.71</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">7</td>
    <td align="right">0.4140</td>
    <td align="right">9.37</td>
    <td align="right">8.45</td>
    <td align="right">13.03</td>
    <td align="center">7</td>
    <td align="right">0.3845</td>
    <td align="right">13.33</td>
    <td align="right">7.80</td>
    <td align="right">12.91</td>
    <td align="center">10</td>
    <td align="right">0.3468</td>
    <td align="right">14.57</td>
    <td align="right">12.25</td>
    <td align="right">12.16</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">9</td>
    <td align="right">0.0852</td>
    <td align="right">16.42</td>
    <td align="right">13.68</td>
    <td align="right">14.25</td>
    <td align="center">10</td>
    <td align="right">0.0714</td>
    <td align="right">21.98</td>
    <td align="right">15.88</td>
    <td align="right">16.60</td>
    <td align="center">11</td>
    <td align="right">0.0493</td>
    <td align="right">26.05</td>
    <td align="right">21.96</td>
    <td align="right">23.13</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">12</td>
    <td align="right">0.0196</td>
    <td align="right">23.13</td>
    <td align="right">17.52</td>
    <td align="right">15.45</td>
    <td align="center">12</td>
    <td align="right">0.0152</td>
    <td align="right">28.91</td>
    <td align="right">22.21</td>
    <td align="right">17.26</td>
    <td align="center">15</td>
    <td align="right">0.0076</td>
    <td align="right">49.71</td>
    <td align="right">38.19</td>
    <td align="right">39.07</td>
  </tr>
</table>
</div>
</p>
</div>
</div>
<div class="sect2">
<h3 id="benchmarks_vs_2022_x64"><a class="link" href="#benchmarks_vs_2022_x64">VS 2022, x64</a></h3>
<div class="paragraph">
<p>
<div style="overflow-x: auto;">
<table class="bordered_table" style="font-size: 85%;">
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,K></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t,K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">6</td>
    <td align="right">2.1519</td>
    <td align="right">11.10</td>
    <td align="right">11.87</td>
    <td align="right">15.76</td>
    <td align="center">4</td>
    <td align="right">3.3467</td>
    <td align="right">4.21</td>
    <td align="right">3.84</td>
    <td align="right">3.79</td>
    <td align="center">5</td>
    <td align="right">3.0383</td>
    <td align="right">4.72</td>
    <td align="right">4.58</td>
    <td align="right">4.52</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">9</td>
    <td align="right">0.3180</td>
    <td align="right">18.05</td>
    <td align="right">18.04</td>
    <td align="right">16.58</td>
    <td align="center">5</td>
    <td align="right">1.0300</td>
    <td align="right">6.22</td>
    <td align="right">5.70</td>
    <td align="right">5.67</td>
    <td align="center">6</td>
    <td align="right">0.8268</td>
    <td align="right">7.09</td>
    <td align="right">6.91</td>
    <td align="right">6.79</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0469</td>
    <td align="right">68.24</td>
    <td align="right">79.45</td>
    <td align="right">25.94</td>
    <td align="center">6</td>
    <td align="right">0.4034</td>
    <td align="right">16.32</td>
    <td align="right">13.98</td>
    <td align="right">13.97</td>
    <td align="center">7</td>
    <td align="right">0.2883</td>
    <td align="right">16.42</td>
    <td align="right">16.00</td>
    <td align="right">16.02</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">14</td>
    <td align="right">0.0065</td>
    <td align="right">102.36</td>
    <td align="right">117.69</td>
    <td align="right">31.08</td>
    <td align="center">7</td>
    <td align="right">0.1887</td>
    <td align="right">20.87</td>
    <td align="right">19.33</td>
    <td align="right">19.26</td>
    <td align="center">8</td>
    <td align="right">0.1194</td>
    <td align="right">20.70</td>
    <td align="right">22.48</td>
    <td align="right">22.55</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t,K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4510</td>
    <td align="right">6.10</td>
    <td align="right">4.69</td>
    <td align="right">4.60</td>
    <td align="center">5</td>
    <td align="right">2.3157</td>
    <td align="right">8.57</td>
    <td align="right">5.05</td>
    <td align="right">4.97</td>
    <td align="center">5</td>
    <td align="right">2.7361</td>
    <td align="right">3.17</td>
    <td align="right">2.40</td>
    <td align="right">2.31</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4207</td>
    <td align="right">10.18</td>
    <td align="right">8.79</td>
    <td align="right">8.59</td>
    <td align="center">8</td>
    <td align="right">0.3724</td>
    <td align="right">14.85</td>
    <td align="right">9.56</td>
    <td align="right">9.29</td>
    <td align="center">8</td>
    <td align="right">0.5415</td>
    <td align="right">4.81</td>
    <td align="right">4.92</td>
    <td align="right">4.34</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0764</td>
    <td align="right">26.70</td>
    <td align="right">23.24</td>
    <td align="right">23.54</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">29.69</td>
    <td align="right">27.85</td>
    <td align="right">27.90</td>
    <td align="center">11</td>
    <td align="right">0.1179</td>
    <td align="right">14.92</td>
    <td align="right">16.50</td>
    <td align="right">11.60</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0150</td>
    <td align="right">36.05</td>
    <td align="right">34.93</td>
    <td align="right">35.15</td>
    <td align="center">14</td>
    <td align="right">0.0122</td>
    <td align="right">39.81</td>
    <td align="right">38.16</td>
    <td align="right">38.14</td>
    <td align="center">13</td>
    <td align="right">0.0275</td>
    <td align="right">16.37</td>
    <td align="right">17.89</td>
    <td align="right">12.37</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock32&lt;K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,fast_multiblock64&lt;K>,1></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.4788</td>
    <td align="right">3.18</td>
    <td align="right">2.26</td>
    <td align="right">2.16</td>
    <td align="center">5</td>
    <td align="right">2.4546</td>
    <td align="right">4.08</td>
    <td align="right">3.48</td>
    <td align="right">3.43</td>
    <td align="center">5</td>
    <td align="right">2.3234</td>
    <td align="right">4.17</td>
    <td align="right">3.40</td>
    <td align="right">3.33</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">8</td>
    <td align="right">0.4394</td>
    <td align="right">5.21</td>
    <td align="right">5.56</td>
    <td align="right">4.70</td>
    <td align="center">8</td>
    <td align="right">0.4210</td>
    <td align="right">6.73</td>
    <td align="right">6.13</td>
    <td align="right">5.67</td>
    <td align="center">8</td>
    <td align="right">0.3754</td>
    <td align="right">7.65</td>
    <td align="right">6.64</td>
    <td align="right">5.69</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">11</td>
    <td align="right">0.0865</td>
    <td align="right">15.06</td>
    <td align="right">15.45</td>
    <td align="right">10.99</td>
    <td align="center">11</td>
    <td align="right">0.0781</td>
    <td align="right">23.17</td>
    <td align="right">18.49</td>
    <td align="right">15.69</td>
    <td align="center">11</td>
    <td align="right">0.0642</td>
    <td align="right">20.82</td>
    <td align="right">19.11</td>
    <td align="right">16.18</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">13</td>
    <td align="right">0.0178</td>
    <td align="right">16.74</td>
    <td align="right">17.88</td>
    <td align="right">12.32</td>
    <td align="center">13</td>
    <td align="right">0.0160</td>
    <td align="right">28.66</td>
    <td align="right">26.92</td>
    <td align="right">18.97</td>
    <td align="center">14</td>
    <td align="right">0.0110</td>
    <td align="right">28.58</td>
    <td align="right">26.87</td>
    <td align="right">19.11</td>
  </tr>
  <tr>
    <th></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>></code></th>
    <th colspan="5"><code>filter&lt;int,1,block&lt;uint64_t[8],K>,1></code></th>
    <th colspan="5"><code>filter&lt;int,1,multiblock&lt;uint64_t[8],K>></code></th>
  </tr>
  <tr>
    <th>c</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
    <th>K</th>
    <th>FPR<br/>[%]</th>
    <th>ins.</th>
    <th>succ.<br/>lkp.</th>
    <th>uns.<br/>lkp.</th>
  </tr>
  <tr>
    <td align="center">8</td>
    <td align="center">5</td>
    <td align="right">2.3292</td>
    <td align="right">7.72</td>
    <td align="right">7.43</td>
    <td align="right">11.95</td>
    <td align="center">6</td>
    <td align="right">2.2986</td>
    <td align="right">10.68</td>
    <td align="right">9.72</td>
    <td align="right">14.95</td>
    <td align="center">7</td>
    <td align="right">2.3389</td>
    <td align="right">11.52</td>
    <td align="right">10.03</td>
    <td align="right">10.06</td>
  </tr>
  <tr>
    <td align="center">12</td>
    <td align="center">7</td>
    <td align="right">0.4140</td>
    <td align="right">11.37</td>
    <td align="right">12.06</td>
    <td align="right">13.71</td>
    <td align="center">7</td>
    <td align="right">0.3845</td>
    <td align="right">14.52</td>
    <td align="right">13.96</td>
    <td align="right">14.46</td>
    <td align="center">10</td>
    <td align="right">0.3468</td>
    <td align="right">15.45</td>
    <td align="right">14.39</td>
    <td align="right">14.26</td>
  </tr>
  <tr>
    <td align="center">16</td>
    <td align="center">9</td>
    <td align="right">0.0852</td>
    <td align="right">25.26</td>
    <td align="right">25.52</td>
    <td align="right">19.68</td>
    <td align="center">10</td>
    <td align="right">0.0714</td>
    <td align="right">33.28</td>
    <td align="right">32.53</td>
    <td align="right">20.02</td>
    <td align="center">11</td>
    <td align="right">0.0493</td>
    <td align="right">41.18</td>
    <td align="right">40.24</td>
    <td align="right">40.31</td>
  </tr>
  <tr>
    <td align="center">20</td>
    <td align="center">12</td>
    <td align="right">0.0196</td>
    <td align="right">35.58</td>
    <td align="right">34.62</td>
    <td align="right">22.93</td>
    <td align="center">12</td>
    <td align="right">0.0152</td>
    <td align="right">42.87</td>
    <td align="right">41.63</td>
    <td align="right">22.03</td>
    <td align="center">15</td>
    <td align="right">0.0076</td>
    <td align="right">68.99</td>
    <td align="right">64.79</td>
    <td align="right">64.87</td>
  </tr>
</table>
</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reference"><a class="link" href="#reference">Reference</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="header_bloom"><a class="link" href="#header_bloom"><code>&lt;boost/bloom.hpp&gt;</code></a></h3>
<div class="paragraph">
<p>Convenience header including all the other headers listed in this
reference.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="header_filter"><a class="link" href="#header_filter"><code>&lt;boost/bloom/filter.hpp&gt;</code></a></h3>
<div class="paragraph">
<p>Defines <code><a href="#filter">boost::bloom::filter</a></code>
and associated functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>namespace boost{
namespace bloom{

template&lt;
  typename T, std::size_t K,
  typename Subfilter = block&lt;unsigned char, 1&gt;, std::size_t Stride = 0,
  typename Hash = boost::hash&lt;T&gt;,
  typename Allocator = std::allocator&lt;unsigned char&gt;
&gt;
class <a href="#filter">filter</a>;

template&lt;
  typename T, std::size_t K, typename SF, std::size_t S, typename H, typename A
&gt;
bool <a href="#filter_operator">operator==</a>(
  const filter&lt;T, K, SF, S, H, A&gt;&amp; x, const filter&lt;T, K, SF, S, H, A&gt;&amp; y);

template&lt;
  typename T, std::size_t K, typename SF, std::size_t S, typename H, typename A
&gt;
bool <a href="#filter_operator_2">operator!=</a>(
  const filter&lt;T, K, SF, S, H, A&gt;&amp; x, const filter&lt;T, K, SF, S, H, A&gt;&amp; y);

template&lt;
  typename T, std::size_t K, typename SF, std::size_t S, typename H, typename A
&gt;
void <a href="#filter_swap_2">swap</a>(filter&lt;T, K, SF, S, H, A&gt;&amp; x, filter&lt;T, K, SF, S, H, A&gt;&amp; y)
  noexcept(noexcept(x.swap(y)));

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filter"><a class="link" href="#filter">Class Template <code>filter</code></a></h3>
<div class="paragraph">
<p><code>boost::bloom::filter</code>&#8201;&#8212;&#8201;A data structure that supports element insertion
and <em>probabilistic</em> lookup, where an element can be determined to be in the filter
with high confidence or else not be with absolute certainty. The probability
that lookup erroneously classifies a non-present element as present is called
the filter&#8217;s <em>false positive rate</em> (FPR).</p>
</div>
<div class="paragraph">
<p><code>boost::bloom::filter</code> maintains an internal array of <code>m</code> bits where <code>m</code> is the
filter&#8217;s <em>capacity</em>.  Unlike traditional containers, inserting an
element <code>x</code> does not store a copy of <code>x</code> within the filter, but rather results
in a fixed number of bits in the array being set to one, where the positions
of the bits are pseudorandomly produced from the hash value of <code>x</code>. Lookup
for <code>y</code> simply checks whether all the bits associated to <code>y</code> are actually set.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a given filter,  the FPR increases as new elements are inserted.</p>
</li>
<li>
<p>For a given number of inserted elements, a filter with higher capacity
has a lower FPR.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By convention, we say that a filter is <em>empty</em> if its capacity is zero or
all the bits in the internal array are set to zero.</p>
</div>
<div class="sect3">
<h4 id="filter_synopsis"><a class="link" href="#filter_synopsis">Synopsis</a></h4>
<div class="listingblock">
<div class="content">
<pre>// #include &lt;boost/bloom/filter.hpp&gt;

namespace boost{
namespace bloom{

template&lt;
  typename T, std::size_t K,
  typename Subfilter = block&lt;unsigned char, 1&gt;, std::size_t Stride = 0,
  typename Hash = boost::hash&lt;T&gt;,
  typename Allocator = std::allocator&lt;unsigned char&gt;
&gt;
class filter
{
public:
  // types and constants
  using value_type                         = T;
  static constexpr std::size_t k           = K;
  using subfilter                          = Subfilter;
  static constexpr std::size_t <a href="#filter_stride">stride</a>      = <a href="#filter_stride"><em>see below</em></a>;
  using hasher                             = Hash;
  using allocator_type                     = Allocator;
  using size_type                          = std::size_t;
  using difference_type                    = std::ptrdiff_t;
  using reference                          = value_type&amp;;
  using const_reference                    = const value_type&amp;;
  using pointer                            = value_type*;
  using const_pointer                      = const value_type*;

  // construct/copy/destroy
  <a href="#filter_default_constructor">filter</a>();
  explicit <a href="#filter_capacity_constructor">filter</a>(
    size_type m, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());
  <a href="#filter_capacity_constructor">filter</a>(
    size_type n, double fpr, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());
  template&lt;typename InputIterator&gt;
    <a href="#filter_iterator_range_constructor">filter</a>(
      InputIterator first, InputIterator last,
      size_type m, const hasher&amp; h = hasher(),
      const allocator_type&amp; al = allocator_type());
  template&lt;typename InputIterator&gt;
    <a href="#filter_iterator_range_constructor">filter</a>(
      InputIterator first, InputIterator last,
      size_type n, double fpr, const hasher&amp; h = hasher(),
      const allocator_type&amp; al = allocator_type());
  <a href="#filter_copy_constructor">filter</a>(const filter&amp; x);
  <a href="#filter_move_constructor">filter</a>(filter&amp;&amp; x);
  template&lt;typename InputIterator&gt;
    <a href="#filter_iterator_range_constructor_with_allocator">filter</a>(
      InputIterator first, InputIterator last,
      size_type m, const allocator_type&amp; al);
  template&lt;typename InputIterator&gt;
    <a href="#filter_iterator_range_constructor_with_allocator">filter</a>(
      InputIterator first, InputIterator last,
      size_type n, double fpr, const allocator_type&amp; al);
  explicit <a href="#filter_allocator_constructor">filter</a>(const allocator_type&amp; al);
  <a href="#filter_copy_constructor_with_allocator">filter</a>(const filter&amp; x, const allocator_type&amp; al);
  <a href="#filter_move_constructor_with_allocator">filter</a>(filter&amp;&amp; x, const allocator_type&amp; al);
  <a href="#filter_initializer_list_constructor">filter</a>(
    std::initializer_list&lt;value_type&gt; il,
    size_type m, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());
  <a href="#filter_initializer_list_constructor">filter</a>(
    std::initializer_list&lt;value_type&gt; il,
    size_type n, double fpr, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());
  <a href="#filter_capacity_constructor_with_allocator">filter</a>(size_type m, const allocator_type&amp; al);
  <a href="#filter_capacity_constructor_with_allocator">filter</a>(size_type n, double fpr, const allocator_type&amp; al);
  <a href="#filter_initializer_list_constructor_with_allocator">filter</a>(
    std::initializer_list&lt;value_type&gt; il,
    size_type m, const allocator_type&amp; al);
  <a href="#filter_initializer_list_constructor_with_allocator">filter</a>(
    std::initializer_list&lt;value_type&gt; il,
    size_type n, double fpr, const allocator_type&amp; al);
  <a href="#filter_destructor">~filter</a>();
  filter&amp; <a href="#filter_copy_assignment">operator=</a>(const filter&amp; x);
  filter&amp; <a href="#filter_move_assignment">operator=</a>(filter&amp;&amp; x)
    noexcept(
	  std::allocator_traits&lt;Allocator&gt;::is_always_equal::value ||
      std::allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment::value);
  filter&amp; <a href="#filter_initializer_list_assignment">operator=</a>(std::initializer_list&lt;value_type&gt; il);
  allocator_type <a href="#filter_get_allocator">get_allocator</a>() const noexcept;

  // capacity
  size_type <a href="#filter_capacity_2">capacity</a>() const noexcept;
  static size_type <a href="#filter_capacity_estimation">capacity_for</a>(size_type n, double fpr);
  static double <a href="#filter_fpr_estimation">fpr_for</a>(size_type n,size_type m)

  // data access
  boost::span&lt;unsigned char&gt;       <a href="#filter_array">array</a>() noexcept;
  boost::span&lt;const unsigned char&gt; <a href="#filter_array">array</a>() const noexcept;

  // modifiers
  void <a href="#filter_insert">insert</a>(const value_type&amp; x);
  template&lt;typename U&gt;
    void <a href="#filter_insert">insert</a>(const U&amp; x);
  template&lt;typename InputIterator&gt;
    void <a href="#filter_insert_iterator_range">insert</a>(InputIterator first, InputIterator last);
  void <a href="#filter_insert_initializer_list">insert</a>(std::initializer_list&lt;value_type&gt; il);

  void <a href="#filter_swap">swap</a>(filter&amp; x)
    noexcept(std::allocator_traits&lt;Allocator&gt;::is_always_equal::value ||
             std::allocator_traits&lt;Allocator&gt;::propagate_on_container_swap::value);
  void <a href="#filter_clear">clear</a>() noexcept;
  void <a href="#filter_reset">reset</a>(size_type m = 0);
  void <a href="#filter_reset">reset</a>(size_type n, double fpr);

  filter&amp; <a href="#filter_combine_with_and">operator&amp;=</a>(const filter&amp; x);
  filter&amp; <a href="#filter_combine_with_or">operator|=</a>(const filter&amp; x);

  // observers
  hasher <a href="#filter_hash_function">hash_function</a>() const;

  // lookup
  bool <a href="#filter_may_contain">may_contain</a>(const value_type&amp; x) const;
  template&lt;typename U&gt;
    bool <a href="#filter_may_contain">may_contain</a>(const U&amp; x) const;
};

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_description"><a class="link" href="#filter_description">Description</a></h4>
<div class="paragraph">
<p><strong>Template Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cv-unqualified object type of the elements inserted into the filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of times the associated subfilter is invoked per element upon insertion or lookup.
<code>K</code> must be greater than zero.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Subfilter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <a href="#subfilter">subfilter</a> type providing the exact algorithm for
bit setting/checking into the filter&#8217;s internal array. The subfilter is invoked <code>K</code> times
per operation on <code>K</code> pseudorandomly selected portions of the array (<em>subarrays</em>) of width
<code><a href="#subfilters_used_value_size"><em>used-value-size</em></a>&lt;Subfilter&gt;</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Stride</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distance in bytes between the initial positions of consecutive subarrays.
If <code>Stride</code> is specified as zero, the actual distance is automatically selected to
<code><em>used-value-size</em>&lt;Subfilter&gt;</code> (non-overlapping subarrays).
Otherwise, <code>Stride</code> must be not greater than <code><em>used-value-size</em>&lt;Subfilter&gt;</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Hash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <a href="https://en.cppreference.com/w/cpp/named_req/Hash" target="_blank" rel="noopener">Hash</a> type over <code>T</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Allocator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <a href="https://en.cppreference.com/w/cpp/named_req/Allocator" target="_blank" rel="noopener">Allocator</a> whose value type is
<code>unsigned char</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Allocation and deallocation of the internal array is done through an internal copy of the
provided allocator. If <code><a href="#filter_stride">stride</a></code> is a
multiple of <em>a</em> = <code>alignof(Subfilter::value_type)</code>, the array is byte-aligned to
max(64, <em>a</em>).</p>
</div>
<div class="paragraph">
<p>If <code><a href="../../../container_hash/doc/html/hash.html#ref_hash_is_avalanchinghash">boost::hash_is_avalanching</a>&lt;Hash&gt;::value</code>
is <code>true</code> and <code>sizeof(std::size_t) &gt;= 8</code>,
the hash function is used as-is; otherwise, a bit-mixing post-processing stage
is added to increase the quality of hashing at the expense of extra computational cost.</p>
</div>
<div class="paragraph">
<p><strong>Exception Safety Guarantees</strong></p>
</div>
<div class="paragraph">
<p>Except when explicitly noted, all non-const member functions and associated functions taking
<code>boost::bloom::filter</code> by non-const reference provide the
<a href="https://en.cppreference.com/w/cpp/language/exceptions#Exception_safety" target="_blank" rel="noopener">basic exception guarantee</a>,
whereas all const member functions and associated functions taking
<code>boost::bloom::filter</code> by const reference provide the
<a href="https://en.cppreference.com/w/cpp/language/exceptions#Exception_safety" target="_blank" rel="noopener">strong exception guarantee</a>.</p>
</div>
<div class="paragraph">
<p>Except when explicitly noted, no operation throws an exception unless that exception
is thrown by the filter&#8217;s <code>Hash</code> or <code>Allocator</code> object (if any).</p>
</div>
</div>
<div class="sect3">
<h4 id="filter_types_and_constants"><a class="link" href="#filter_types_and_constants">Types and Constants</a></h4>
<div id="filter_stride" class="listingblock">
<div class="content">
<pre>static constexpr std::size_t stride;</pre>
</div>
</div>
<div class="paragraph">
<p>Equal to <code>Stride</code> if that parameter was specified as distinct from zero.
Otherwise, equal to <code><a href="#subfilters_used_value_size"><em>used-value-size</em></a>&lt;subfilter&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="filter_constructors"><a class="link" href="#filter_constructors">Constructors</a></h4>
<div class="sect4">
<h5 id="filter_default_constructor"><a class="link" href="#filter_default_constructor">Default Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter();</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs an empty filter using <code>hasher()</code> as the hash function and
<code>allocator_type()</code> as the allocator.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>hasher</code>, and <code>allocator_type</code> must be <a href="https://en.cppreference.com/w/cpp/named_req/DefaultConstructible" target="_blank" rel="noopener">DefaultConstructible</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>capacity() == 0</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_capacity_constructor"><a class="link" href="#filter_capacity_constructor">Capacity Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>explicit filter(
  size_type m, const hasher&amp; h = hasher(),
  const allocator_type&amp; al = allocator_type());
filter(
  size_type n, double fpr, const hasher&amp; h = hasher(),
  const allocator_type&amp; al = allocator_type());</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs an empty filter using copies of <code>h</code> and <code>al</code> as the hash function and allocator, respectively.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>fpr</code> is between 0.0 and 1.0.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>capacity() == 0</code> if <code>m == 0</code>, <code>capacity() &gt;= m</code> otherwise (first overload).<br>
<code>capacity() == capacity_for(n, fpr)</code> (second overload).</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_iterator_range_constructor"><a class="link" href="#filter_iterator_range_constructor">Iterator Range Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>template&lt;typename InputIterator&gt;
  filter(
    InputIterator first, InputIterator last,
    size_type m, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());
template&lt;typename InputIterator&gt;
  filter(
    InputIterator first, InputIterator last,
    size_type n, double fpr, const hasher&amp; h = hasher(),
    const allocator_type&amp; al = allocator_type());</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a filter using copies of <code>h</code> and <code>al</code> as the hash function and allocator, respectively,
and inserts the values from <code>[first, last)</code> into it.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>InputIterator</code> is a <a href="https://en.cppreference.com/w/cpp/named_req/InputIterator" target="_blank" rel="noopener">LegacyInputIterator</a> referring to <code>value_type</code>.<br>
<code>[first, last)</code> is a valid range.<br>
<code>fpr</code> is between 0.0 and 1.0.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>capacity() == 0</code> if <code>m == 0</code>, <code>capacity() &gt;= m</code> otherwise (first overload).<br>
<code>capacity() == capacity_for(n, fpr)</code> (second overload).<br>
<code>may_contain(x)</code> for all values <code>x</code> from <code>[first, last)</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_copy_constructor"><a class="link" href="#filter_copy_constructor">Copy Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(const filter&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a filter using copies of <code>x</code>'s internal array, <code>x.hash_function()</code>
and <code>std::allocator_traits&lt;Allocator&gt;::select_on_container_copy_construction(x.get_allocator())</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>*this == x</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_move_constructor"><a class="link" href="#filter_move_constructor">Move Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(filter&amp;&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a filter tranferring <code>x</code>'s internal array to <code>*this</code> and using
a hash function and allocator move-constructed from <code>x</code>'s hash function
and allocator, respectively.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>x.capacity() == 0</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_iterator_range_constructor_with_allocator"><a class="link" href="#filter_iterator_range_constructor_with_allocator">Iterator Range Constructor with Allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>template&lt;typename InputIterator&gt;
  filter(
    InputIterator first, InputIterator last,
    size_type m, const allocator_type&amp; al);
template&lt;typename InputIterator&gt;
  filter(
    InputIterator first, InputIterator last,
    size_type n, double fpr, const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code><a href="#filter_iterator_range_constructor">filter</a>(first, last, m, hasher(), al)</code> (first overload)
or <code><a href="#filter_iterator_range_constructor">filter</a>(first, last, n, fpr, hasher(), al)</code> (second overload).</p>
</div>
</div>
<div class="sect4">
<h5 id="filter_allocator_constructor"><a class="link" href="#filter_allocator_constructor">Allocator Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>explicit filter(const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs an empty filter using <code>hasher()</code> as the hash function and
a copy of <code>al</code> as the allocator.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>hasher</code> must be <a href="https://en.cppreference.com/w/cpp/named_req/DefaultConstructible" target="_blank" rel="noopener">DefaultConstructible</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>capacity() == 0</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_copy_constructor_with_allocator"><a class="link" href="#filter_copy_constructor_with_allocator">Copy Constructor with Allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(const filter&amp; x, const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a filter using copies of <code>x</code>'s internal array, <code>x.hash_function()</code>
and <code>al</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>*this == x</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_move_constructor_with_allocator"><a class="link" href="#filter_move_constructor_with_allocator">Move Constructor with Allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(filter&amp;&amp; x, const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a filter tranferring <code>x</code>'s internal array to <code>*this</code> if
<code>al == x.get_allocator()</code>, or using a copy of the array otherwise.
The hash function of the new filter is move-constructed from <code>x</code>'s
hash function and the allocator is a copy of <code>al</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>x.capacity() == 0</code>.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_initializer_list_constructor"><a class="link" href="#filter_initializer_list_constructor">Initializer List Constructor</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(
  std::initializer_list&lt;value_type&gt; il,
  size_type m, const hasher&amp; h = hasher(),
  const allocator_type&amp; al = allocator_type());
filter(
  std::initializer_list&lt;value_type&gt; il,
  size_type n, double fpr, const hasher&amp; h = hasher(),
  const allocator_type&amp; al = allocator_type());</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code><a href="#filter_iterator_range_constructor">filter</a>(il.begin(), il.end(), m, h, al)</code> (first overload)
or <code><a href="#filter_iterator_range_constructor">filter</a>(il.begin(), il.end(), n, fpr, h, al)</code> (second overload).</p>
</div>
</div>
<div class="sect4">
<h5 id="filter_capacity_constructor_with_allocator"><a class="link" href="#filter_capacity_constructor_with_allocator">Capacity Constructor with Allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(size_type m, const allocator_type&amp; al);
filter(size_type n, double fpr, const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code><a href="#filter_capacity_constructor">filter</a>(m, hasher(), al)</code> (first overload)
or <code><a href="#filter_capacity_constructor">filter</a>(n, fpr, hasher(), al)</code> (second overload).</p>
</div>
</div>
<div class="sect4">
<h5 id="filter_initializer_list_constructor_with_allocator"><a class="link" href="#filter_initializer_list_constructor_with_allocator">Initializer List Constructor with Allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter(
  std::initializer_list&lt;value_type&gt; il,
  size_type m, const allocator_type&amp; al);
filter(
  std::initializer_list&lt;value_type&gt; il,
  size_type n, double fpr, const allocator_type&amp; al);</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code><a href="#filter_initializer_list_constructor">filter</a>(il, m, hasher(), al)</code> (first overload)
or <code><a href="#filter_initializer_list_constructor">filter</a>(il, n, fpr, hasher(), al)</code> (second overload).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_destructor"><a class="link" href="#filter_destructor">Destructor</a></h4>
<div class="listingblock">
<div class="content">
<pre>~filter();</pre>
</div>
</div>
<div class="paragraph">
<p>Deallocates the internal array and destructs the internal hash function and allocator.</p>
</div>
</div>
<div class="sect3">
<h4 id="filter_assignment"><a class="link" href="#filter_assignment">Assignment</a></h4>
<div class="sect4">
<h5 id="filter_copy_assignment"><a class="link" href="#filter_copy_assignment">Copy Assignment</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter&amp; operator=(const filter&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>Let <code>pocca</code> be <code>std::allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment::value</code>.
If <code>pocca</code>, replaces the internal allocator <code>al</code> with a copy of <code>x.get_allocator()</code>.
If <code>capacity() != x.capacity()</code> or <code>pocca &amp;&amp; al != x.get_allocator()</code>, replaces the internal array
with a new one with capacity  <code>x.capacity()</code>.
Copies the values of <code>x</code>'s internal array.
Replaces the internal hash function with a copy of <code>x.hash_function()</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>If <code>pocca</code>,
<code>Allocator</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/CopyAssignable" target="_blank" rel="noopener">CopyAssignable</a>.<br>
<code>hasher</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/Swappable" target="_blank" rel="noopener">Swappable</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>*this == x</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>*this</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Strong.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_move_assignment"><a class="link" href="#filter_move_assignment">Move Assignment</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter&amp; operator=(filter&amp;&amp; x)
  noexcept(
    std::allocator_traits&lt;Allocator&gt;::is_always_equal::value ||
    std::allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment::value);</pre>
</div>
</div>
<div class="paragraph">
<p>Let <code>pocma</code> be <code>std::allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment::value</code>.
If <code>pocma</code>, replaces the internal allocator with a copy of <code>x.get_allocator()</code>.
If <code>get_allocator() == x.get_allocator()</code>, transfers <code>x</code>'s internal array to <code>*this</code>;
otherwise, replaces the internal array with a new one with capacity <code>x.capacity()</code>
and copies the values of <code>x</code>'s internal array.
Replaces the internal hash function with a copy of <code>x.hash_function()</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>If <code>pocma</code>,
<code>Allocator</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/CopyAssignable" target="_blank" rel="noopener">CopyAssignable</a>.<br>
<code>hasher</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/Swappable" target="_blank" rel="noopener">Swappable</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>x.capacity() == 0</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>*this</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Nothrow as indicated, otherwise strong.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_initializer_list_assignment"><a class="link" href="#filter_initializer_list_assignment">Initializer List Assignment</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter&amp; operator=(std::initializer_list&lt;value_type&gt; il);</pre>
</div>
</div>
<div class="paragraph">
<p>Clears the filter and inserts the values from <code>il</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>*this</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_capacity"><a class="link" href="#filter_capacity">Capacity</a></h4>
<div class="sect4">
<h5 id="filter_capacity_2"><a class="link" href="#filter_capacity_2">Capacity</a></h5>
<div class="listingblock">
<div class="content">
<pre>size_type capacity() const noexcept;</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>capacity()</code> is a multiple of <code>CHAR_BIT</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>The size in bits of the internal array.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_capacity_estimation"><a class="link" href="#filter_capacity_estimation">Capacity Estimation</a></h5>
<div class="listingblock">
<div class="content">
<pre>static size_type capacity_for(size_type n, double fpr);</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>fpr</code> is between 0.0 and 1.0.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>filter(capacity_for(n, fpr)).capacity() == capacity_for(n, fpr)</code>.<br>
<code>capacity_for(n, 1.0) == 0</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>An estimation of the capacity required by a <code>filter</code> to attain a false positive rate
equal to <code>fpr</code> when <code>n</code> distinct elements have been inserted.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_fpr_estimation"><a class="link" href="#filter_fpr_estimation">FPR Estimation</a></h5>
<div class="listingblock">
<div class="content">
<pre>static double fpr_for(size_type n, size_type m);</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>fpr_for(n, m)</code> is between 0.0 and 1.0.<br>
<code>fpr_for(n, 0) == 1.0</code>.<br>
<code>fpr_for(0, m) == 0.0</code>  (if <code>m != 0</code>).<br></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>An estimation of the resulting false positive rate when
<code>n</code> distinct elements have been inserted into a <code>filter</code>
with capacity <code>m</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_data_access"><a class="link" href="#filter_data_access">Data Access</a></h4>
<div class="sect4">
<h5 id="filter_array"><a class="link" href="#filter_array">Array</a></h5>
<div class="listingblock">
<div class="content">
<pre>boost::span&lt;unsigned char&gt;       array() noexcept;
boost::span&lt;const unsigned char&gt; array() const noexcept;</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>array().size() == capacity() / CHAR_BIT</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>A span over the internal array.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_modifiers"><a class="link" href="#filter_modifiers">Modifiers</a></h4>
<div class="sect4">
<h5 id="filter_insert"><a class="link" href="#filter_insert">Insert</a></h5>
<div class="listingblock">
<div class="content">
<pre>void insert(const value_type&amp; x);
template&lt;typename U&gt; void insert(const U&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>capacity() != 0</code>, sets to one <code>k * subfilter::k</code> (not necessarily distinct)
bits of the internal array deterministically selected from the value
<code>hash_function()(x)</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p><code>may_contain(x)</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Strong.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Notes:
</td>
<td class="hdlist2">
<p>The second overload only participates in overload resolution if
<code>hasher::is_transparent</code> is a valid member typedef.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_insert_iterator_range"><a class="link" href="#filter_insert_iterator_range">Insert Iterator Range</a></h5>
<div class="listingblock">
<div class="content">
<pre>template&lt;typename InputIterator&gt;
  void insert(InputIterator first, InputIterator last);</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code>while(first != last) <a href="#filter_insert">insert</a>(*first++)</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>InputIterator</code> is a <a href="https://en.cppreference.com/w/cpp/named_req/InputIterator" target="_blank" rel="noopener">LegacyInputIterator</a> referring to <code>value_type</code>.<br>
<code>[first, last)</code> is a valid range.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_insert_initializer_list"><a class="link" href="#filter_insert_initializer_list">Insert Initializer List</a></h5>
<div class="listingblock">
<div class="content">
<pre>void insert(std::initializer_list&lt;value_type&gt; il);</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code><a href="#filter_insert_iterator_range">insert</a>(il.begin(), il.end())</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="filter_swap"><a class="link" href="#filter_swap">Swap</a></h5>
<div class="listingblock">
<div class="content">
<pre>void swap(filter&amp; x)
  noexcept(std::allocator_traits&lt;Allocator&gt;::is_always_equal::value ||
           std::allocator_traits&lt;Allocator&gt;::propagate_on_container_swap::value);</pre>
</div>
</div>
<div class="paragraph">
<p>Let <code>pocs</code> be <code>std::allocator_traits&lt;Allocator&gt;::propagate_on_container_swap::value</code>.
Swaps the internal array and hash function with those of <code>x</code>.
If <code>pocs</code>, swaps the internal allocator with that of <code>x</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>pocs || get_allocator() == x.get_allocator()</code>.<br>
If <code>pocs</code>, <code>Allocator</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/Swappable" target="_blank" rel="noopener">Swappable</a>.<br>
<code>hasher</code> is nothrow <a href="https://en.cppreference.com/w/cpp/named_req/Swappable" target="_blank" rel="noopener">Swappable</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Nothrow.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_clear"><a class="link" href="#filter_clear">Clear</a></h5>
<div class="listingblock">
<div class="content">
<pre>void clear() noexcept;</pre>
</div>
</div>
<div class="paragraph">
<p>Sets to zero all the bits in the internal array.</p>
</div>
</div>
<div class="sect4">
<h5 id="filter_reset"><a class="link" href="#filter_reset">Reset</a></h5>
<div class="listingblock">
<div class="content">
<pre>void reset(size_type m = 0);
void reset(size_type n, double fpr);</pre>
</div>
</div>
<div class="paragraph">
<p>First overload: Replaces the internal array if the resulting capacity calculated from <code>m</code> is not
equal to <code>capacity()</code>, and clears the filter.<br>
Second overload: Equivalent to <code>reset(capacity_for(n, fpr))</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p><code>fpr</code> is between 0.0 and 1.0.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p>In general, <code>capacity() &gt;= m</code>.<br>
If <code>m == 0</code> or <code>m == capacity()</code> or <code>m == capacity_for(n, fpr)</code> for some <code>n</code> and <code>fpr</code>, then <code>capacity() == m</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>If <code>m == 0</code> or <code>capacity_for(n, fpr) == 0</code>, nothrow, otherwise strong.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_combine_with_and"><a class="link" href="#filter_combine_with_and">Combine with AND</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter&amp; operator&amp;=(const filter&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>capacity() != x.capacity()</code>, throws a <code>std::invalid_argument</code> exception;
otherwise, changes the value of each bit in the internal array with the result of
doing a logical AND operation of that bit and the corresponding one in <code>x</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>The <code>Hash</code> objects of <code>x</code> and <code>y</code> are equivalent.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>*this</code>;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Strong.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_combine_with_or"><a class="link" href="#filter_combine_with_or">Combine with OR</a></h5>
<div class="listingblock">
<div class="content">
<pre>filter&amp; operator|=(const filter&amp; x);</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>capacity() != x.capacity()</code>, throws an <code>std::invalid_argument</code> exception;
otherwise, changes the value of each bit in the internal array with the result of
doing a logical OR operation of that bit and the corresponding one in <code>x</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>The <code>Hash</code> objects of <code>x</code> and <code>y</code> are equivalent.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>*this</code>;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exception Safety:
</td>
<td class="hdlist2">
<p>Strong.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_observers"><a class="link" href="#filter_observers">Observers</a></h4>
<div class="sect4">
<h5 id="filter_get_allocator"><a class="link" href="#filter_get_allocator">get_allocator</a></h5>
<div class="listingblock">
<div class="content">
<pre>allocator_type get_allocator() const noexcept;</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>A copy of the internal allocator.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_hash_function"><a class="link" href="#filter_hash_function">hash_function</a></h5>
<div class="listingblock">
<div class="content">
<pre>hasher hash_function() const;</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p>A copy of the internal hash function.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_lookup"><a class="link" href="#filter_lookup">Lookup</a></h4>
<div class="sect4">
<h5 id="filter_may_contain"><a class="link" href="#filter_may_contain">may_contain</a></h5>
<div class="listingblock">
<div class="content">
<pre>bool may_contain(const value_type&amp; x) const;
template&lt;typename U&gt; bool may_contain(const U&amp; x) const;</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>true</code> iff all the bits selected by a hypothetical
<code><a href="#filter_insert">insert</a>(x)</code> operation are set to one.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Notes:
</td>
<td class="hdlist2">
<p>The second overload only participates in overload resolution if
<code>hasher::is_transparent</code> is a valid member typedef.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_comparison"><a class="link" href="#filter_comparison">Comparison</a></h4>
<div class="sect4">
<h5 id="filter_operator"><a class="link" href="#filter_operator">operator==</a></h5>
<div class="listingblock">
<div class="content">
<pre>template&lt;
  typename T, std::size_t K, typename S, std::size_t B, typename H, typename A
&gt;
bool operator==(
  const filter&lt;T, K, S, B, H, A&gt;&amp; x, const filter&lt;T, K, S, B, H, A&gt;&amp; y);</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>The <code>Hash</code> objects of <code>x</code> and <code>y</code> are equivalent.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>true</code> iff <code>x.capacity() == y.capacity()</code> and
<code>x</code>'s and <code>y</code>'s internal arrays are bitwise identical.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="filter_operator_2"><a class="link" href="#filter_operator_2">operator!=</a></h5>
<div class="listingblock">
<div class="content">
<pre>template&lt;
  typename T, std::size_t K, typename S, std::size_t B, typename H, typename A
&gt;
bool operator!=(
  const filter&lt;T, K, S, B, H, A&gt;&amp; x, const filter&lt;T, K, S, B, H, A&gt;&amp; y);</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Preconditions:
</td>
<td class="hdlist2">
<p>The <code>Hash</code> objects of <code>x</code> and <code>y</code> are equivalent.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Returns:
</td>
<td class="hdlist2">
<p><code>!(x <a href="#filter_operator">==</a> y)</code>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filter_swap_2"><a class="link" href="#filter_swap_2">Swap</a></h4>
<div class="listingblock">
<div class="content">
<pre>template&lt;
  typename T, std::size_t K, typename S, std::size_t B, typename H, typename A
&gt;
void swap(filter&lt;T, K, S, B, H, A&gt;&amp; x, filter&lt;T, K, S, B, H, A&gt;&amp; y)
  noexcept(noexcept(x.swap(y)));</pre>
</div>
</div>
<div class="paragraph">
<p>Equivalent to <code>x.<a href="#filter_swap">swap</a>(y)</code>.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="subfilter"><a class="link" href="#subfilter">Subfilters</a></h3>
<div class="paragraph">
<p>A <em>subfilter</em> implements a specific algorithm for bit setting (insertion) and
bit checking (lookup) for <code>boost::bloom::filter</code>. Subfilters operate
on portions of the filter&#8217;s internal array called <em>subarrays</em>. The
exact width of these subarrays is statically dependent on the subfilter type.</p>
</div>
<div class="paragraph">
<p>The full interface of a conforming subfilter is not exposed publicly, hence
users can&#8217;t provide their own subfilters and may only use those natively
provided by the library. What follows is the publicly available interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Subfilter::k</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Result:
</td>
<td class="hdlist2">
<p>A compile-time <code>std::size_t</code> value indicating
the number of (not necessarily distinct) bits set/checked per operation.</p>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>typename Subfilter::value_type</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Result:
</td>
<td class="hdlist2">
<p>A cv-unqualified,
<a href="https://en.cppreference.com/w/cpp/named_req/TriviallyCopyable" target="_blank" rel="noopener">TriviallyCopyable</a>
type to which the subfilter projects assigned subarrays.</p>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>Subfilter::used_value_size</pre>
</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Result:
</td>
<td class="hdlist2">
<p>A compile-time <code>std::size_t</code> value indicating
the size of the effective portion of <code>Subfilter::value_type</code> used
for bit setting/checking (assumed to begin at the lowest address in memory).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Postconditions:
</td>
<td class="hdlist2">
<p>Greater than zero and not greater than <code>sizeof(Subfilter::value_type)</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Notes:
</td>
<td class="hdlist2">
<p>Optional.</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="subfilters_used_value_size"><a class="link" href="#subfilters_used_value_size"><em>used-value-size</em></a></h4>
<div class="listingblock">
<div class="content">
<pre>template&lt;typename Subfilter&gt;
constexpr std::size_t <em>used-value-size</em>; // exposition only</pre>
</div>
</div>
<div class="paragraph">
<p><code><em>used-value-size</em>&lt;Subfilter&gt;</code> is <code>Subfilter::used_value_size</code> if this nested
constant exists, or <code>sizeof(Subfilter::value_type)</code> otherwise.
The value is the effective size in bytes of the subarrays upon which a
given subfilter operates.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="header_block"><a class="link" href="#header_block"><code>&lt;boost/bloom/block.hpp&gt;</code></a></h3>
<div class="listingblock">
<div class="content">
<pre>namespace boost{
namespace bloom{

template&lt;typename Block, std::size_t K&gt;
struct <a href="#block">block</a>;

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="block"><a class="link" href="#block">Class Template <code>block</code></a></h3>
<div class="paragraph">
<p><code>boost::bloom::block</code>&#8201;&#8212;&#8201;A <a href="#subfilter">subfilter</a> over an integral type.</p>
</div>
<div class="sect3">
<h4 id="block_synopsis"><a class="link" href="#block_synopsis">Synopsis</a></h4>
<div class="listingblock">
<div class="content">
<pre>// #include &lt;boost/bloom/block.hpp&gt;

namespace boost{
namespace bloom{

template&lt;typename Block, std::size_t K&gt;
struct block
{
  static constexpr std::size_t k = K;
  using value_type               = Block;

  // the rest of the interface is not public

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="block_description"><a class="link" href="#block_description">Description</a></h4>
<div class="paragraph">
<p><strong>Template Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Block</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An unsigned integral type or an array of 2<sup><code>N</code></sup> elements of unsigned integral type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bits set/checked per operation. Must be greater than zero.</p></td>
</tr>
</tbody>
</table>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="header_multiblock"><a class="link" href="#header_multiblock"><code>&lt;boost/bloom/multiblock.hpp&gt;</code></a></h3>
<div class="listingblock">
<div class="content">
<pre>namespace boost{
namespace bloom{

template&lt;typename Block, std::size_t K&gt;
struct <a href="#multiblock">multiblock</a>;

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiblock"><a class="link" href="#multiblock">Class Template <code>multiblock</code></a></h3>
<div class="paragraph">
<p><code>boost::bloom::multiblock</code>&#8201;&#8212;&#8201;A <a href="#subfilter">subfilter</a> over an array of an integral type.</p>
</div>
<div class="sect3">
<h4 id="multiblock_synopsis"><a class="link" href="#multiblock_synopsis">Synopsis</a></h4>
<div class="listingblock">
<div class="content">
<pre>// #include &lt;boost/bloom/multiblock.hpp&gt;

namespace boost{
namespace bloom{

template&lt;typename Block, std::size_t K&gt;
struct multiblock
{
  static constexpr std::size_t k = K;
  using value_type               = Block[k];

  // the rest of the interface is not public

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="multiblock_description"><a class="link" href="#multiblock_description">Description</a></h4>
<div class="paragraph">
<p><strong>Template Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Block</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An unsigned integral type or an array of 2<sup><code>N</code></sup> elements of unsigned integral type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bits set/checked per operation. Must be greater than zero.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each of the <code>K</code> bits set/checked is located in a different element of the
<code>Block[K]</code> array.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="header_fast_multiblock32"><a class="link" href="#header_fast_multiblock32"><code>&lt;boost/bloom/fast_multiblock32.hpp&gt;</code></a></h3>
<div class="listingblock">
<div class="content">
<pre>namespace boost{
namespace bloom{

template&lt;std::size_t K&gt;
struct <a href="#fast_multiblock32">fast_multiblock32</a>;

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fast_multiblock32"><a class="link" href="#fast_multiblock32">Class Template <code>fast_multiblock32</code></a></h3>
<div class="paragraph">
<p><code>boost::bloom::fast_multiblock32</code>&#8201;&#8212;&#8201;A faster replacement of
<code><a href="#multiblock">multiblock</a>&lt;std::uint32_t, K&gt;</code>.</p>
</div>
<div class="sect3">
<h4 id="fast_multiblock32_synopsis"><a class="link" href="#fast_multiblock32_synopsis">Synopsis</a></h4>
<div class="listingblock">
<div class="content">
<pre>// #include &lt;boost/bloom/fast_multiblock32.hpp&gt;

namespace boost{
namespace bloom{

template&lt;std::size_t K&gt;
struct fast_multiblock32
{
  static constexpr std::size_t k               = K;
  using value_type                             = <em>implementation-defined</em>;

  // might not be present
  static constexpr std::size_t used_value_size = <em>implementation-defined</em>;

  // the rest of the interface is not public

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="fast_multiblock32_description"><a class="link" href="#fast_multiblock32_description">Description</a></h4>
<div class="paragraph">
<p><strong>Template Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bits set/checked per operation. Must be greater than zero.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>fast_multiblock32&lt;K&gt;</code> is statistically equivalent to
<code><a href="#multiblock">multiblock</a>&lt;std::uint32_t, K&gt;</code>, but takes advantage
of selected SIMD technologies, when available at compile time, to perform faster.
Currently supported: AVX2, little-endian Neon, SSE2.
The non-SIMD case falls back to regular <code>multiblock</code>.</p>
</div>
<div class="paragraph">
<p><code><a href="#subfilters_used_value_size"><em>used-value-size</em></a>&lt;fast_multiblock32&lt;K&gt;&gt;</code> is
<code>4 * K</code>.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="header_fast_multiblock64"><a class="link" href="#header_fast_multiblock64"><code>&lt;boost/bloom/fast_multiblock64.hpp&gt;</code></a></h3>
<div class="listingblock">
<div class="content">
<pre>namespace boost{
namespace bloom{

template&lt;std::size_t K&gt;
struct <a href="#fast_multiblock64">fast_multiblock64</a>;

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fast_multiblock64"><a class="link" href="#fast_multiblock64">Class Template <code>fast_multiblock64</code></a></h3>
<div class="paragraph">
<p><code>boost::bloom::fast_multiblock64</code>&#8201;&#8212;&#8201;A faster replacement of
<code><a href="#multiblock">multiblock</a>&lt;std::uint64_t, K&gt;</code>.</p>
</div>
<div class="sect3">
<h4 id="fast_multiblock64_synopsis"><a class="link" href="#fast_multiblock64_synopsis">Synopsis</a></h4>
<div class="listingblock">
<div class="content">
<pre>// #include &lt;boost/bloom/fast_multiblock64.hpp&gt;

namespace boost{
namespace bloom{

template&lt;std::size_t K&gt;
struct fast_multiblock64
{
  static constexpr std::size_t k               = K;
  using value_type                             = <em>implementation-defined</em>;

  // might not be present
  static constexpr std::size_t used_value_size = <em>implementation-defined</em>;

  // the rest of the interface is not public

} // namespace bloom
} // namespace boost</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="fast_multiblock64_description"><a class="link" href="#fast_multiblock64_description">Description</a></h4>
<div class="paragraph">
<p><strong>Template Parameters</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bits set/checked per operation. Must be greater than zero.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>fast_multiblock64&lt;K&gt;</code> is statistically equivalent to
<code><a href="#multiblock">multiblock</a>&lt;std::uint64_t, K&gt;</code>, but takes advantage
of selected SIMD technologies, when available at compile time, to perform faster.
Currently supported: AVX2.
The non-SIMD case falls back to regular <code>multiblock</code>.</p>
</div>
<div class="paragraph">
<p><code><a href="#subfilters_used_value_size"><em>used-value-size</em></a>&lt;fast_multiblock64&lt;K&gt;&gt;</code> is
<code>8 * K</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future_work"><a class="link" href="#future_work">Future Work</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A number of features asked by reviewers and users of Boost.Bloom are
considered for inclusion into future versions of the library.</p>
</div>
<div class="sect2">
<h3 id="future_work_bulk_operations"><a class="link" href="#future_work_bulk_operations">Bulk operations</a></h3>
<div class="paragraph">
<p>Each insertion/lookup operation for <code>boost::bloom::filter</code> likely involves one or more
cache misses in the access to the internal bit array. Following a similar
approach to that of
<a href="https://bannalia.blogspot.com/2023/10/bulk-visitation-in-boostconcurrentflatm.html" target="_blank" rel="noopener">bulk visitation</a>
in Boost.Unordered, we can pipeline several operations so that
cache miss stalls are leveraged to do useful computation. The interface
for this functionality could be as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">first1</span><span class="p">,</span> <span class="n">last1</span><span class="p">);</span>
<span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="n">first2</span><span class="p">,</span> <span class="n">last2</span><span class="p">,</span> <span class="p">[]</span> <span class="p">(</span><span class="k">const</span> <span class="n">value_type</span><span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// x is (likely) in the filter if res == true</span>
<span class="p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="future_work_try_insert"><a class="link" href="#future_work_try_insert"><code>try_insert</code></a></h3>
<div class="paragraph">
<p>To avoid inserting an already present element, we now have to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">f</span><span class="p">.</span><span class="n">may_contain</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="n">f</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These two calls can be combined in a potentially faster,
single operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="kt">bool</span> <span class="n">res</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">try_insert</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="c1">// returns true if x was not present</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="future_work_estimation_of_number_of_elements_inserted"><a class="link" href="#future_work_estimation_of_number_of_elements_inserted">Estimation of number of elements inserted</a></h3>
<div class="paragraph">
<p>For a classical Bloom filter, the number of elements actually inserted
can be estimated from the number <font style="font-size:90%">\(B\)</font> of bits set
to one in the array as</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(n\approx-\displaystyle\frac{m}{k}\ln\left(1-\displaystyle\frac{B}{m}\right),\)</font></p>
</div>
<div class="paragraph">
<p>which can be used for the implementation of a member function
<code>estimated_size</code>. As of this writing, we don&#8217;t know how to extend the
formula to the case of block and multiblock filters. Any help on this
problem is much appreciated.</p>
</div>
</div>
<div class="sect2">
<h3 id="future_work_run_time_specification_of_k"><a class="link" href="#future_work_run_time_specification_of_k">Run-time specification of <em>k</em></a></h3>
<div class="paragraph">
<p>Currently, the number <em>k</em> of bits set per operation is configured at compile time.
A variation of (or extension to) <code>boost::bloom::filter</code> can be provided
where the value of <em>k</em> is specified at run-time, the tradeoff being that
its performance will be worse than the static case (preliminary experiments
show an increase in execution time of around 10-20%).</p>
</div>
</div>
<div class="sect2">
<h3 id="future_work_alternative_filters"><a class="link" href="#future_work_alternative_filters">Alternative filters</a></h3>
<div class="paragraph">
<p>We can consider adding additional data structures such as
<a href="https://en.wikipedia.org/wiki/Cuckoo_filter" target="_blank" rel="noopener">cuckoo</a> and
<a href="https://arxiv.org/pdf/1912.08258" target="_blank" rel="noopener">xor</a> filters, which are more
space efficient and potentially faster.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fpr_estimation"><a class="link" href="#fpr_estimation">Appendix A: FPR Estimation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a classical Bloom filter, the theoretical false positive rate, under some simplifying assumptions,
is given by</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}(n,m,k)=\left(1 - \left(1 - \displaystyle\frac{1}{m}\right)^{kn}\right)^k \approx \left(1 - e^{-kn/m}\right)^k\)</font> for large <font style="font-size:90%">\(m\)</font>,</p>
</div>
<div class="paragraph">
<p>where <font style="font-size:90%">\(n\)</font> is the number of elements inserted in the filter, <font style="font-size:90%">\(m\)</font> its capacity in bits and <font style="font-size:90%">\(k\)</font> the
number of bits set per insertion (see a <a href="https://en.wikipedia.org/wiki/Bloom_filter#Probability_of_false_positives" target="_blank" rel="noopener">derivation</a>
of this formula). For a fixed inverse load factor <font style="font-size:90%">\(c=m/n\)</font>,
the expression reaches at</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(k_{\text{opt}}=c\cdot\ln2\)</font></p>
</div>
<div class="paragraph">
<p>its minimum value
<font style="font-size:90%">\(1/2^{k_{\text{opt}}} \approx 0.6185^{c}\)</font>.
The optimum <font style="font-size:90%">\(k\)</font>, which must be an integer,
is either
<font style="font-size:90%">\(\lfloor k_{\text{opt}}\rfloor\)</font> or
<font style="font-size:90%">\(\lceil k_{\text{opt}}\rceil\)</font>.</p>
</div>
<div class="paragraph">
<p>In the case of filter of the form <code>boost::bloom::filter&lt;T, K, block&lt;Block, K'&gt;&gt;</code>, we can extend
the approach from <a href="https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=f376ff09a64b388bfcde2f5353e9ddb44033aac8" target="_blank" rel="noopener">Putze et al.</a>
to derive the (approximate but very precise) formula:</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}_{\text{block}}(n,m,b,k,k')=\left(\displaystyle\sum_{i=0}^{\infty} \text{Pois}(i,nbk/m) \cdot \text{FPR}(i,b,k')\right)^{k},\)</font></p>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{Pois}(i,\lambda)=\displaystyle\frac{\lambda^i e^{-\lambda}}{i!}\)</font></p>
</div>
<div class="paragraph">
<p>is the probability mass function of a <a href="https://en.wikipedia.org/wiki/Poisson_distribution" target="_blank" rel="noopener">Poisson distribution</a>
with mean <font style="font-size:90%">\(\lambda\)</font>, and <font style="font-size:90%">\(b\)</font> is the size of <code>Block</code> in bits. If we&#8217;re using <code>multiblock&lt;Block,K'&gt;</code>, we have</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}_\text{multiblock}(n,m,b,k,k')=\left(\displaystyle\sum_{i=0}^{\infty} \text{Pois}(i,nbkk'/m) \cdot \text{FPR}(i,b,1)^{k'}\right)^{k}.\)</font></p>
</div>
<div class="paragraph">
<p>As we have commented <a href="#primer_multiblock_filters">before</a>, in general</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}_\text{block}(n,m,b,k,k') \geq \text{FPR}_\text{multiblock}(n,m,b,k,k') \geq \text{FPR}(n,m,kk'),\)</font></p>
</div>
<div class="paragraph">
<p>that is, block and multiblock filters have worse FPR than the classical filter for the same number of bits
set per insertion, but they will be faster. We have the particular case</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}_{\text{block}}(n,m,b,k,1)=\text{FPR}_{\text{multiblock}}(n,m,b,k,1)=\text{FPR}(n,m,k),\)</font></p>
</div>
<div class="paragraph">
<p>which follows simply from the observation that using <code>{block|multiblock}&lt;Block, 1&gt;</code> behaves exactly as
a classical Bloom filter.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t know of any closed, simple formula for the FPR of block and multiblock filters when
<code>Stride</code> is not its "natural" size <code><a href="#subfilters_used_value_size"><em>used-value-size</em></a>&lt;Subfilter&gt;</code>,
that is, when subfilter subarrays overlap.
We can use the following approximations (<font style="font-size:90%">\(s\)</font> = <code>Stride</code> in bits):</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(\text{FPR}_{\text{block}}(n,m,b,s,k,k')=\left(\displaystyle\sum_{i=0}^{\infty} \text{Pois}\left(i,\frac{n(2b-s)k}{m}\right) \cdot \text{FPR}(i,2b-s,k')\right)^{k},\)</font><br>
<font style="font-size:90%">\(\text{FPR}_\text{multiblock}(n,m,b,s,k,k')=\left(\displaystyle\sum_{i=0}^{\infty} \text{Pois}\left(i,\frac{n(2bk'-s)k}{m}\right) \cdot \text{FPR}\left(i,\frac{2bk'-s}{k'},1\right)^{k'}\right)^{k},\)</font></p>
</div>
<div class="paragraph">
<p>where the replacement of <font style="font-size:90%">\(b\)</font> with <font style="font-size:90%">\(2b-s\)</font>
(or <font style="font-size:90%">\(bk'\)</font> with <font style="font-size:90%">\(2bk'-s\)</font> for multiblock filters) accounts
for the fact that the window of hashing positions affecting a particular bit spreads due to
overlapping. Note that the formulas reduce to the non-overlapping case when <font style="font-size:90%">\(s\)</font> takes its
default value (\(b\) for block, \(bk'\) for multiblock). These approximations are acceptable for
low values of <font style="font-size:90%">\(k'\)</font> but tend to underestimate the actual FPR as <font style="font-size:90%">\(k'\)</font> grows.
In general, the use of overlapping improves (decreases) FPR by a factor ranging from
0.6 to 0.9 for typical filter configurations.</p>
</div>
<div class="paragraph">
<p><font style="font-size:90%">\(\text{FPR}_{\text{block}}(n,m,b,s,k,k')\)</font> and <font style="font-size:90%">\(\text{FPR}_\text{multiblock}(n,m,b,s,k,k')\)</font>
are the formulas used by the implementation of
<code><a href="#filter_fpr_estimation">boost::filter::fpr_for</a></code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementation_notes"><a class="link" href="#implementation_notes">Appendix B: Implementation Notes</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="implementation_notes_hash_mixing"><a class="link" href="#implementation_notes_hash_mixing">Hash Mixing</a></h3>
<div class="paragraph">
<p>This is the bit-mixing post-process we use to improve the statistical properties
of the hash function when it doesn&#8217;t have the avalanching property:</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(m\leftarrow\text{mul}(h,C)\)</font>,<br>
<font style="font-size:90%">\(h'\leftarrow\text{high}(m)\text{ xor }\text{low}(m)\)</font>,</p>
</div>
<div class="paragraph">
<p>where <font style="font-size:90%">\(\text{mul}\)</font> denotes 128-bit multiplication of two 64-bit factors,
<font style="font-size:90%">\(\text{high}(m)\)</font> and <font style="font-size:90%">\(\text{low}(m)\)</font>
are the high and low 64-bit words of <font style="font-size:90%">\(m\)</font>, respectively,
<font style="font-size:90%">\(C=\lfloor 2^{64}/\varphi \rfloor\)</font> and
<font style="font-size:90%">\(\varphi\)</font> is the <a href="https://en.wikipedia.org/wiki/Golden_ratio" target="_blank" rel="noopener">golden ratio</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementation_notes_32_bit_mode"><a class="link" href="#implementation_notes_32_bit_mode">32-bit mode</a></h3>
<div class="paragraph">
<p>Internally, we always use 64-bit hash values even if in 32-bit mode, where
the user-provided hash function produces 32-bit outputs. To expand
a 32-bit hash value to 64 bits, we use the same mixing procedure
described
<a href="#implementation_notes_hash_mixing">above</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementation_notes_dispensing_with_multiple_hash_functions"><a class="link" href="#implementation_notes_dispensing_with_multiple_hash_functions">Dispensing with Multiple Hash Functions</a></h3>
<div class="paragraph">
<p>Direct implementations of a Bloom filter with <font style="font-size:90%">\(k\)</font>
bits per operation require <font style="font-size:90%">\(k\)</font> different and independent
hash functions <font style="font-size:90%">\(h_i(x)\)</font>, which incurs an important
performance penalty, particularly if the objects are expensive to hash
(e.g. strings). <a href="https://www.eecs.harvard.edu/~michaelm/postscripts/rsa2008.pdf" target="_blank" rel="noopener">Kirsch and Mitzenmacher</a>
show how to relax this requirement down to two different hash functions
<font style="font-size:90%">\(h_1(x)\)</font> and <font style="font-size:90%">\(h_2(x)\)</font> linearly
combined as</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(g_i(x)=h_1(x)+ih_2(x).\)</font></p>
</div>
<div class="paragraph">
<p>Without formal justification, we have relaxed this even further to just one
initial hash value <font style="font-size:90%">\(h_0=h_0(x)\)</font>, where new values
<font style="font-size:90%">\(h_i\)</font> are computed from  <font style="font-size:90%">\(h_{i-1}\)</font>
by means of very cheap mixing schemes. In what follows
<font style="font-size:90%">\(k\)</font>, <font style="font-size:90%">\(k'\)</font> are the homonym values
in a filter of the form <code>boost::bloom::filter&lt;T, K, {block|multiblock}&lt;Block, K'&gt;&gt;</code>,
<font style="font-size:90%">\(b\)</font> is <code>sizeof(Block) * CHAR_BIT</code>,
and <font style="font-size:90%">\(r\)</font> is the number of subarrays in the filter.</p>
</div>
<div class="sect3">
<h4 id="implementation_notes_subarray_location"><a class="link" href="#implementation_notes_subarray_location">Subarray Location</a></h4>
<div class="paragraph">
<p>To produce a location (i.e. a number <font style="font-size:90%">\(p\)</font> in <font style="font-size:90%">\([0,r)\)</font>) from
<font style="font-size:90%">\(h_{i-1}\)</font>, instead of the straightforward but costly
procedure <font style="font-size:90%">\(p\leftarrow h_{i-1}\bmod r\)</font> we resort to
Lemire&#8217;s <a href="https://arxiv.org/pdf/1805.10941" target="_blank" rel="noopener">fastrange technique</a>:</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(m\leftarrow\text{mul}(h_{i-1},r),\)</font><br>
<font style="font-size:90%">\(p\leftarrow\lfloor m/2^{64} \rfloor=\text{high}(m).\)</font></p>
</div>
<div class="paragraph">
<p>To decorrelate <font style="font-size:90%">\(p\)</font> from further uses of the hash value,
we produce <font style="font-size:90%">\(h_{i}\)</font> from <font style="font-size:90%">\(h_{i-1}\)</font> as</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(h_i\leftarrow c \cdot h_{i-1} \bmod 2^{64}=\text{low}(c \cdot h_{i-1}),\)</font></p>
</div>
<div class="paragraph">
<p>with <font style="font-size:90%">\(c=\text{0xf1357aea2e62a9c5}\)</font> (64-bit mode),
<font style="font-size:90%">\(c=\text{0xe817fb2d}\)</font> (32-bit mode) obtained
from <a href="https://arxiv.org/pdf/2001.05304" target="_blank" rel="noopener">Steele and Vigna</a>.
The transformation <font style="font-size:90%">\(h_{i-1} \rightarrow h_i\)</font> is
a simple <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator" target="_blank" rel="noopener">multiplicative congruential generator</a>
over <font style="font-size:90%">\(2^{64}\)</font>. For this MCG to produce long
cycles <font style="font-size:90%">\(h_0\)</font> must be odd, so the implementation adjusts
<font style="font-size:90%">\(h_0\)</font> to <font style="font-size:90%">\(h_0'= (h_0\text{ or }1)\)</font>,
which renders the least significant bit of <font style="font-size:90%">\(h_i\)</font>
unsuitable for pseudorandomization (it is always one).</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation_notes_bit_selection"><a class="link" href="#implementation_notes_bit_selection">Bit selection</a></h4>
<div class="paragraph">
<p>Inside a subfilter, we must produce <font style="font-size:90%">\(k'\)</font>
values from <font style="font-size:90%">\(h_i\)</font> in the range
<font style="font-size:90%">\([0,b)\)</font> (the positions of the <font style="font-size:90%">\(k'\)</font>
bits). We do this by successively taking <font style="font-size:90%">\(\log_2b\)</font> bits
from <font style="font-size:90%">\(h_i\)</font> without utilizing the portion containing
its least significant bit (which is always one as we have discussed).
If we run out of bits (which happens when
<font style="font-size:90%">\(k'&gt; 63/\log_2b\)</font>), we produce a new hash value
<font style="font-size:90%">\(h_{i+1}\)</font> from <font style="font-size:90%">\(h_{i}\)</font>
using the mixing procedure
<a href="#implementation_notes_hash_mixing">already described</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="implementation_notes_simd_algorithms"><a class="link" href="#implementation_notes_simd_algorithms">SIMD algorithms</a></h3>
<div class="sect3">
<h4 id="implementation_notes_fast_multiblock32"><a class="link" href="#implementation_notes_fast_multiblock32"><code>fast_multiblock32</code></a></h4>
<div class="paragraph">
<p>When using AVX2, we select up to 8 bits at a time by creating
a <code>__m256i</code> of 32-bit values <font style="font-size:90%">\((x_0,x_1,...,x_7)\)</font>
where each <font style="font-size:90%">\(x_i\)</font> is constructed from
a different 5-bit portion of the hash value, and calculating from this
the <code>__m256i</code> <font style="font-size:90%">\((2^{x_0},2^{x_1},...,2^{x_7})\)</font>
with <a href="https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-10/mm256-sllv-epi32-64.html" target="_blank" rel="noopener"><code>_mm256_sllv_epi32</code></a>.
If more bits are needed, we generate a new hash value as
<a href="#implementation_notes_hash_mixing">described before</a> and repeat.</p>
</div>
<div class="paragraph">
<p>For little-endian Neon, the algorithm is similar but the computations
are carried out with two <code>uint32x4_t</code>s in parallel as Neon does not have
256-bit registers.</p>
</div>
<div class="paragraph">
<p>In the case of SSE2, we don&#8217;t have the 128-bit equivalent of
<code>_mm256_sllv_epi32</code>, so we use the following, mildly interesting
technique: a <code>__m128i</code> of the form</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\(((x_0+127)\cdot 2^{23},(x_1+127)\cdot 2^{23},(x_2+127)\cdot 2^{23},(x_3+127)\cdot 2^{23}),\)</font></p>
</div>
<div class="paragraph">
<p>where each <font style="font-size:90%">\(x_i\)</font> is in <font style="font-size:90%">\([0,32)\)</font>,
can be <code>reinterpret_cast</code>ed to (i.e., has the same binary representation as)
the <code>__m128</code> (register of <code>float</code>s)</p>
</div>
<div class="paragraph formula-center">
<p><font style="font-size:90%">\((2^{x_0},2^{x_1},2^{x_2},2^{x_3}),\)</font></p>
</div>
<div class="paragraph">
<p>from which our desired <code>__m128i</code> of shifted 1s can be obtained
with <a href="https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-10/conversion-intrinsics-003.html#GUID-B1CFE576-21E9-4E70-BE5E-B9B18D598C12" target="_blank" rel="noopener"><code>_mm_cvttps_epi32</code></a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation_notes_fast_multiblock64"><a class="link" href="#implementation_notes_fast_multiblock64"><code>fast_multiblock64</code></a></h4>
<div class="paragraph">
<p>We only provide a SIMD implementation for AVX2 that relies in two
parallel <code>__m256i</code>s for the generation of up
to 8 64-bit values with shifted 1s. For Neon and SSE2, emulation
through 4 128-bit registers proved slower than non-SIMD <code>multiblock&lt;uint64_t, K&gt;</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release_notes"><a class="link" href="#release_notes">Release Notes</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="release_notes_boost_1_89"><a class="link" href="#release_notes_boost_1_89">Boost 1.89</a></h3>
<div class="ulist">
<ul>
<li>
<p>Initial release.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="acknowledgements"><a class="link" href="#acknowledgements">Acknowledgements</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Peter Dimov and Christian Mazakas reviewed significant portions of the code
and documentation during the development phase. Sam Darwin provided support
for CI setup and documentation building. Braden Ganetsky contributed the
GDB pretty-printer for <code>boost::bloom::filter</code>.</p>
</div>
<div class="paragraph">
<p>The Boost acceptance review took place between the 13th and 22nd of May,
2025. Big thanks to Arnaud Becheler for his expert managing. The
following people participated in the review:
Dmitry Arkhipov,
David Bien,
Claudio DeSouza,
Peter Dimov,
Vinnie Falco,
Alexander Grund,
Seth Heeren,
Andrzej Krzemie&nacute;ski,
Ivan Matek,
Christian Mazakas,
Rub&eacute;n P&eacute;rez,
Kostas Savvidis,
Peter Turcan,
Tomer Vromen. Many thanks to all of them for their very helpful feedback.</p>
</div>
<div class="paragraph">
<p>Boost.Bloom was designed and written in
<a href="https://en.wikipedia.org/wiki/C%C3%A1ceres%2c_Spain" target="_blank" rel="noopener">C&aacute;ceres</a> and
<a href="https://en.wikipedia.org/wiki/Oropesa,_Spain" target="_blank" rel="noopener">Oropesa</a>,
January-June 2025.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright"><a class="link" href="#copyright">Copyright and License</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Of this documentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copyright &copy; 2025 Joaqu&iacute;n M L&oacute;pez Mu&ntilde;oz</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Distributed under the <a href="http://www.boost.org/LICENSE_1_0.txt" target="_blank" rel="noopener">Boost Software License, Version 1.0</a>.</p>
</div>
</div>
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>