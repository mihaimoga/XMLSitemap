<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Boost.OpenMethod</title>
  <link rel="canonical" href="https://antora.cppalliance.org/develop/lib/doc/openmethod/namespaces.html">
    <link rel="prev" href="headers.html">
    <link rel="next" href="friends.html">
  <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../_/css/boostlook.css">
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/vendor/tabs.css">
    <script>var uiRootPath = '../_'</script>
<link rel="icon" href="../_/img/favicons/favicon.ico" type="image/x-icon">
    <!-- Favicon configuration -->
    <link rel="apple-touch-icon" sizes="180x180" href="../_/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../_/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../_/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="../_/img/favicons/site.webmanifest">
    <link rel="shortcut icon" href="../_/img/favicons/favicon.ico">
  </head>
  <body class="article toc2 toc-left">
    <div class="boostlook">
  <div id="header">
    <div id="toc" class="nav-container toc2" data-component="openmethod" data-version="">
  <aside class="nav">
    <button class="nav-close"></button>
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
      <h3 class="title"><a href="index.html">Boost.OpenMethod</a></h3>
      <ul class="nav-list">
        <ul class="nav-list">
        <li class="" data-depth="1">
            <a class="nav-link" href="motivation.html">Motivation</a>
        </li>
              <li class="" data-depth="1">
            <span class="nav-text">Basic Features</span>
        </li>
        <ul class="nav-list">
        <li class="" data-depth="2">
            <a class="nav-link" href="basics.html">Methods and Overriders</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="performance.html">Performance</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="smart_pointers.html">Smart Pointers</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="headers.html">Header and Implementation Files</a>
        </li>
              <li class=" is-current-page" data-depth="2">
            <a class="nav-link" href="namespaces.html">Namespaces</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="friends.html">Friends</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="multiple_dispatch.html">Multiple Dispatch</a>
        </li>
        </ul>
        <li class="" data-depth="1">
            <span class="nav-text">Advanced Features</span>
        </li>
        <ul class="nav-list">
        <li class="" data-depth="2">
            <a class="nav-link" href="core_api.html">Core API</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="registries_and_policies.html">Registries and Policies</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="custom_rtti.html">Custom RTTI</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="error_handling.html">Error Handling</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="virtual_ptr_alt.html">Virtual Pointer Alternatives</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="shared_libraries.html">Shared Libraries</a>
        </li>
        </ul>
        <li class="" data-depth="1">
            <span class="nav-text">Reference</span>
        </li>
        <ul class="nav-list">
        <li class="" data-depth="2">
            <a class="nav-link" href="ref_headers.html">Headers</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="ref_macros.html">Macros</a>
        </li>
              <li class="" data-depth="2">
            <a class="nav-link" href="reference/boost/openmethod.html">Namespace boost::openmethod</a>
        </li>
        </ul>
  </ul>
  </ul>
  </nav>
</div>
    </div>
  </aside>
</div>
</div>
  <div id="content">
    <article class="doc max-width-reset">
  <div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>
      <a href="index.html" aria-label="Home: Boost.OpenMethod">
        <svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 -960 960 960" fill="#000000" aria-hidden="true"><path d="M160-120v-480l320-240 320 240v480H560v-280H400v280H160Z"/></svg>
      </a>
    </li>
    <li>Basic Features</li>
    <li><a href="namespaces.html">Namespaces</a></li>
  </ul>
</nav>
<div class="spirit-nav">
    <a accesskey="p" href="headers.html">
      <span class="material-symbols-outlined" title="Previous: Header and Implementation Files">arrow_back</span>
    </a>
    <a class="disabled" accesskey="u" aria-disabled="true" tabindex="-1">
      <span class="material-symbols-outlined" title="Up:">arrow_upward</span>
    </a>
    <a accesskey="n" href="friends.html">
      <span class="material-symbols-outlined" title="Next: Friends">arrow_forward</span>
    </a>
</div></div>
  <div id="namespaces" class="dlist">
<dl>
<dt class="hdlist1">Note</dt>
<dd>
<p>This section uses overrider containers, described in the
<a href="headers.html" class="xref page">Headers and Implementation Files</a> section.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="BOOST_OPENMETHOD.html" class="xref page">BOOST_OPENMETHOD</a> defines a method in the current
namespace. <a href="BOOST_OPENMETHOD_OVERRIDE.html" class="xref page">BOOST_OPENMETHOD_OVERRIDE</a> works
<em>across</em> namespaces. Overriders are not required to be in the same namespace as
the method they override. The macro adds the overrider to a method that can be
called with the same arguments as the overrider, possibly located via argument
dependant lookup.</p>
</div>
<div class="paragraph">
<p>Overrider containers are added to the current namespace. It follows that the
same method can have overriders in multiple containers, in different namespaces.
This must be taken into account when calling an overrider explicitly. Let&#8217;s put
Employee and Salesman in their own namespaces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// roles.hpp

#ifndef ROLES_HPP
#define ROLES_HPP

#include &lt;boost/openmethod.hpp&gt;

namespace employees {

struct Employee {
    virtual ~Employee() = default;
};

BOOST_OPENMETHOD(pay, (boost::openmethod::virtual_ptr&lt;const Employee&gt;), double);

BOOST_OPENMETHOD_INLINE_OVERRIDE(
    pay, (boost::openmethod::virtual_ptr&lt;const Employee&gt;), double) {
    return 5000.0;
}

}

namespace sales {

struct Salesman : employees::Employee {
    double sales = 0.0;
};

} // namespace sales
#endif // ROLES_HPP</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we try to compile <code>salesman.cpp</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">BOOST_OPENMETHOD_OVERRIDE(
    pay, (boost::openmethod::virtual_ptr&lt;const Salesman&gt; emp), double) {
    return BOOST_OPENMETHOD_OVERRIDER(
               pay, (boost::openmethod::virtual_ptr&lt;const Employee&gt; emp),
               double)::fn(emp) +
        emp-&gt;sales * 0.05; // base + commission
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We get an error like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">error: implicit instantiation of undefined template
'sales::pay_boost_openmethod_overriders&lt;
    double (boost::openmethod::virtual_ptr&lt;const employees::Employee&gt;)&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is because the overrider container for <code>pay</code> in namespace <code>sales</code> is
specialized for <code>Salesman</code>, but not for <code>Employee</code>.  The overrider for Employee
is in a specialization of a different container, in namespace <code>employees</code>.</p>
</div>
<div class="paragraph">
<p>The solution is to qualify the overrider container with the <code>employees</code>
namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">namespace sales {

BOOST_OPENMETHOD_OVERRIDE(
    pay, (boost::openmethod::virtual_ptr&lt;const Salesman&gt; emp), double) {
    return employees::BOOST_OPENMETHOD_OVERRIDER(
               pay, (boost::openmethod::virtual_ptr&lt;const employees::Employee&gt; emp),
               double)::fn(emp) +
        emp-&gt;sales * 0.05; // base + commission
}

BOOST_OPENMETHOD_CLASSES(employees::Employee, Salesman)

} // namespace sales</code></pre>
</div>
</div>
  <div class="edit-this-page">
      <a href="https://github.com/boostorg/openmethod/edit/master/doc/modules/ROOT/pages/namespaces.adoc">Edit this Page</a>
      </div>
      <nav class="pagination">
        <span class="prev"><a href="headers.html">Header and Implementation Files</a></span>
        <span class="next"><a href="friends.html">Friends</a></span>
    </nav>
</article>
</div>
  <div id="footer">
  <script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
</div>
</div>
  </body>
</html>
