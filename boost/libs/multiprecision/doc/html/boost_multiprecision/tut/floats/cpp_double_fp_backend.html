<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>cpp_double_fp_backend</title>
<link rel="stylesheet" href="../../../multiprecision.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../../index.html" title="Chapter 1. Boost.Multiprecision">
<link rel="up" href="../floats.html" title="Floating-point Types">
<link rel="prev" href="float128.html" title="float128">
<link rel="next" href="fp_eg.html" title="Examples">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="float128.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../floats.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="fp_eg.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_multiprecision.tut.floats.cpp_double_fp_backend"></a><a class="link" href="cpp_double_fp_backend.html" title="cpp_double_fp_backend">cpp_double_fp_backend</a>
</h4></div></div></div>
<p>
          <code class="computeroutput"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">multiprecision</span><span class="special">/</span><span class="identifier">cpp_double_fp_backend</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code>
        </p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span> <span class="keyword">namespace</span> <span class="identifier">multiprecision</span> <span class="special">{</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">FloatingPointType</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">cpp_double_fp_backend</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">number</span><span class="special">&lt;</span><span class="identifier">cpp_double_fp_backend</span><span class="special">&lt;</span><span class="keyword">float</span><span class="special">&gt;,</span> <span class="identifier">et_off</span><span class="special">&gt;</span> <span class="identifier">cpp_double_float</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">number</span><span class="special">&lt;</span><span class="identifier">cpp_double_fp_backend</span><span class="special">&lt;</span><span class="keyword">double</span><span class="special">&gt;,</span> <span class="identifier">et_off</span><span class="special">&gt;</span> <span class="identifier">cpp_double_double</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">number</span><span class="special">&lt;</span><span class="identifier">cpp_double_fp_backend</span><span class="special">&lt;</span><span class="keyword">long</span> <span class="keyword">double</span><span class="special">&gt;,</span> <span class="identifier">et_off</span><span class="special">&gt;</span> <span class="identifier">cpp_double_long_double</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">number</span><span class="special">&lt;</span><span class="identifier">cpp_double_fp_backend</span><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">float128_type</span><span class="special">&gt;,</span> <span class="identifier">et_off</span><span class="special">&gt;</span> <span class="identifier">cpp_double_float128</span><span class="special">;</span> <span class="comment">// Only when boost::float128_type is available</span>

<span class="special">}</span> <span class="special">}</span> <span class="comment">// namespaces</span>
</pre>
<p>
          The <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          back-end is the sum of two IEEE floating-point numbers combined to create
          a type having rougly twice the composite width of one of its parts. The
          <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code> back-end
          is used in conjunction with <code class="computeroutput"><span class="identifier">number</span></code>
          and acts as an entirely C++ header only floating-point number type.
        </p>
<p>
          The implementation relies on double-word arithmetic which is a technique
          used to represent a real number as the sum of two floating-point numbers.
          Other commonly used names for this include <code class="computeroutput"><span class="keyword">double</span><span class="special">-</span><span class="keyword">double</span></code>
          of <code class="computeroutput"><span class="keyword">double</span><span class="special">-</span><span class="identifier">word</span></code> arithmetic.
        </p>
<p>
          The <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          types have fixed width and do not allocate. The type <code class="computeroutput"><span class="identifier">cpp_double_double</span></code>,
          for instance, (composed of two double-precision IEEE floating-point numebers)
          has (on most common systems) 106 binary digits of precision and approximately
          32 decimal digits of precision.
        </p>
<p>
          The exponent ranges of the types are slightly limited (on the negative
          side) compared to those of the composite type. Consider again the type
          <code class="computeroutput"><span class="identifier">cpp_double_double</span></code>, composed
          of two double-precision IEEE double-precision floating-point numebers.
          On common systems, this type has a maximum decimal exponent of 308 (as
          does a single double-precision floating point number). The negative minimum
          exponent, however, is about -291, which is less range than the -307 from
          standalone double. The reason for the limitation is because the composite
          lower-limb has lower value than its upper limb and would underflow or become
          subnormal if the upper limb had its usual minimum value.
        </p>
<p>
          There is full standard library and <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span></code>
          support available for this type.
        </p>
<p>
          Note that the availability of <code class="computeroutput"><span class="identifier">cpp_double_float128</span></code>
          depends on the availability of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">float128_type</span></code>,
          which can be queried at compile-time via the configuration macro <code class="computeroutput"><span class="identifier">BOOST_HAS_FLOAT128</span></code>. This is available
          at the moment predominantly with GCC compilers in GNU-standard mode and
          (with GCC 14 and later) also in strict ANSI mode.
        </p>
<p>
          Run-time performance is a top-level requirement for the <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          types. The types still do, however, support infinities, NaNs and (of course)
          zeros. Signed negative zero, however, is not supported (in favor of efficiency)
          and all zeros are treated as positive.
        </p>
<p>
          The <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          types interoperate with Boost.Math and Boost.Math.Constants. This offers
          the wealth of Boost-related mathematical tools instantiated with the <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code> types.
        </p>
<p>
          Things you should know when using the <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          types:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              Although the types are created from two individual IEEE floating-point
              components, they specifically and clearly are not IEEE types in their
              composite forms.
            </li>
<li class="listitem">
              As a result these types can behave subtly differently from IEEE floating-point
              types.
            </li>
<li class="listitem">
              The types can not be used with compiler variations of <span class="underline">fast</span>-<span class="underline">math</span> (i.e., <code class="computeroutput"><span class="special">-</span><span class="identifier">ffast</span><span class="special">-</span><span class="identifier">math</span></code> on GCC can not be used and
              <code class="computeroutput"><span class="special">/</span><span class="identifier">fp</span><span class="special">:</span><span class="identifier">precise</span></code>
              is mandatory on MSVC compilers). This is because the algorithms (particularly
              those for addition, subtraction, multiplication and square root) rely
              on precise floating-point rouunding.
            </li>
<li class="listitem">
              The composite types are not as precise as their constituents. For information
              on error-bounds, see Joldes et al. in the references below.
            </li>
<li class="listitem">
              There are <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">numeric_limits</span></code> specializations for
              these types.
            </li>
<li class="listitem">
              Large parts (but not all) of the <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
              implementation are <code class="computeroutput"><span class="keyword">constexpr</span></code>.
              Future evolution is anticipated to make this library entirely <code class="computeroutput"><span class="keyword">constexpr</span></code>.
            </li>
<li class="listitem">
              Conversions to and from string internally use an intermediate <code class="computeroutput"><span class="identifier">cpp_bin_float</span></code> value (which is a bit
              awkward may be eliminated in future refinements).
            </li>
</ul></div>
<p>
          The <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
          back-end has been inspired by original works and types such as the historical
          <code class="computeroutput"><span class="identifier">doubledouble</span></code> and more.
          These include the following:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              K. Briggs, the <code class="computeroutput"><span class="identifier">doubledouble</span></code>
              library, 1998.
            </li>
<li class="listitem">
              V. Shoup, the class <code class="computeroutput"><span class="identifier">quad_float</span></code>
              in the NTL number-theory library <a href="https://libntl.org" target="_top">https://libntl.org</a>.
            </li>
<li class="listitem">
              Yozo Hida, X. Li, and D. H. Bailey, Quad-Double Arithmetic: Algorithms,
              Implementation, and Application, Lawrence Berkeley National Laboratory
              Technical Report LBNL-46996 (2000). Also Y. Hida et al., Library for
              double-double and quad-double arithmetic <a href="https://web.mit.edu/tabbott/Public/quaddouble-debian/qd-2.3.4-old/docs/qd.pdf" target="_top">https://web.mit.edu/tabbott/Public/quaddouble-debian/qd-2.3.4-old/docs/qd.pdf</a>.
            </li>
<li class="listitem">
              Mioara Maria Joldes, Jean-Michel Muller, Valentina Popescu. Tight and
              rigourous error bounds for basic building blocks of double-word arithmetic.
              ACM Transactions on Mathematical Software, 2017, 44 (2), pp. 1 - 27.
              ff10.1145/3121432ff. ffhal-01351529v3f.
            </li>
<li class="listitem">
              The foundational <code class="computeroutput"><span class="identifier">cpp_double_fp_backend</span></code>
              draft was originally created by Fahad Syed in BoostGSoC2021 <span class="underline">multiprecision</span> <a href="https://github.com/BoostGSoC21/multiprecision" target="_top">https://github.com/BoostGSoC21/multiprecision</a>.
            </li>
</ul></div>
</div>
<div class="copyright-footer">Copyright © 2002-2025 Matthew
      Borland, Paul A. Bristow, Christopher Kormanyos, Janek Kozicki, John Maddock
      and Fahad Syed<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="float128.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../floats.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="fp_eg.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
